import{S as tt,i as et,s as ot,E as rt,a as st,b as at,c as it,d as h,e as nt,t as lt,f as ct,g as ut,h as v,j as x,m as ft,k as m,l as b,n as g,o as ht,p as dt,q as A,r as mt,u as _t,v as bt,w as gt,x as At,y as yt,z as T}from"./ECharts.DF4cteOg.js";import"./index.BiZfemjP.js";import{C as xt,a as Ct,f as vt,h as F,L as C,b as Et}from"./common.C16CT1O5.js";function U(l){let t,e,a,o;return{c(){t=A("div"),e=A("span"),a=yt(l[0]),this.h()},l(c){t=b(c,"DIV",{class:!0});var u=g(t);e=b(u,"SPAN",{class:!0,title:!0});var s=g(e);a=At(s,l[0]),s.forEach(h),u.forEach(h),this.h()},h(){m(e,"class","text-[0.7rem]"),m(e,"title",o="Unit: "+l[0]),m(t,"class","absolute top-2 left-4 z-10")},m(c,u){v(c,t,u),x(t,e),x(e,a)},p(c,u){u&1&&gt(a,c[0]),u&1&&o!==(o="Unit: "+c[0])&&m(e,"title",o)},d(c){c&&h(t)}}}function kt(l){let t,e;return{c(){t=A("div"),e=A("div"),this.h()},l(a){t=b(a,"DIV",{class:!0});var o=g(t);e=b(o,"DIV",{class:!0,style:!0}),g(e).forEach(h),o.forEach(h),this.h()},h(){m(e,"class","h-20 w-20 animate-spin rounded-full border-4 border-t-4 border-gray-200"),T(e,"border-top-color",l[1]),m(t,"class","flex h-full w-full items-center justify-center")},m(a,o){v(a,t,o),x(t,e)},p(a,o){o&2&&T(e,"border-top-color",a[1])},d(a){a&&h(t)}}}function wt(l){let t,e,a,o,c,u,s=l[0]&&U(l);function y(i){l[10](i)}let _={init:st,options:l[3],notMerge:!0,$$slots:{default:[kt]},$$scope:{ctx:l}};return l[2]!==void 0&&(_.chart=l[2]),o=new rt({props:_}),at.push(()=>it(o,"chart",y)),{c(){t=A("div"),s&&s.c(),e=mt(),a=A("div"),_t(o.$$.fragment),this.h()},l(i){t=b(i,"DIV",{class:!0});var n=g(t);s&&s.l(n),e=ht(n),a=b(n,"DIV",{class:!0});var f=g(a);dt(o.$$.fragment,f),f.forEach(h),n.forEach(h),this.h()},h(){m(a,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),m(t,"class","relative grow")},m(i,n){v(i,t,n),s&&s.m(t,null),x(t,e),x(t,a),ft(o,a,null),u=!0},p(i,[n]){i[0]?s?s.p(i,n):(s=U(i),s.c(),s.m(t,e)):s&&(s.d(1),s=null);const f={};n&8&&(f.options=i[3]),n&8194&&(f.$$scope={dirty:n,ctx:i}),!c&&n&4&&(c=!0,f.chart=i[2],ut(()=>c=!1)),o.$set(f)},i(i){u||(ct(o.$$.fragment,i),u=!0)},o(i){lt(o.$$.fragment,i),u=!1},d(i){i&&h(t),s&&s.d(),nt(o)}}}const G="en-US";function Dt(l,t,e){let{unit:a=""}=t,{xAxisAttribute:o="startedAt"}=t,{yAxisAttribute:c="value"}=t,{color:u=xt}=t,{colorOpacity:s=.55}=t,{backgroundColor:y=Ct}=t,{timeseries:_}=t,{onclick:i=vt}=t,n,f={};const V=(r,P,z,k,B,M)=>{const j=F(k,B),q=F(C,.75),w=r.length-1,W=new Intl.NumberFormat(G,{maximumFractionDigits:0}),Y=new Intl.DateTimeFormat(G,{month:"short"}),D=r.reduce((d,O,p)=>{const R=p===w?k:j,Z=p===w?C:q;return d.xAxis.push(O[P]),d.yAxis.push({value:O[z],itemStyle:{borderRadius:Et,borderWidth:1,borderColor:R,color:R},label:{show:!0,position:"top",color:Z,fontWeight:"bold",formatter:$=>{const S=$.value;return S===0?"":W.format(S)}}}),d},{xAxis:[],yAxis:[]}),L="2%",I="10%",K={top:I,bottom:I,left:L,right:L},X={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},H={type:"category",data:D.xAxis,axisLabel:{formatter:d=>Y.format(new Date(d)),color:C},axisLine:{show:!1},axisTick:{show:!1}},J={type:"value",show:!1,max:d=>d.max+d.max*(15/100)},Q={type:"bar",data:D.yAxis,barCategoryGap:10};e(3,f={backgroundColor:M,grid:K,tooltip:X,xAxis:H,yAxis:J,series:[Q]})},E=r=>{console.log("onChartClick",r),r.data&&i(_[r.dataIndex])};bt(()=>(n.on("click",E),console.log("EnergyOverviewChart - mounted",{chart:n}),()=>{n.off("click",E),console.log("EnergyOverviewChart - destroyed",{chart:n})}));function N(r){n=r,e(2,n)}return l.$$set=r=>{"unit"in r&&e(0,a=r.unit),"xAxisAttribute"in r&&e(4,o=r.xAxisAttribute),"yAxisAttribute"in r&&e(5,c=r.yAxisAttribute),"color"in r&&e(1,u=r.color),"colorOpacity"in r&&e(6,s=r.colorOpacity),"backgroundColor"in r&&e(7,y=r.backgroundColor),"timeseries"in r&&e(8,_=r.timeseries),"onclick"in r&&e(9,i=r.onclick)},l.$$.update=()=>{l.$$.dirty&498&&V(_,o,c,u,s,y)},[a,u,n,f,o,c,s,y,_,i,N]}class Rt extends tt{constructor(t){super(),et(this,t,Dt,wt,ot,{unit:0,xAxisAttribute:4,yAxisAttribute:5,color:1,colorOpacity:6,backgroundColor:7,timeseries:8,onclick:9})}}export{Rt as E};

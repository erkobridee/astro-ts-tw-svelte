import{S as it,i as nt,s as st,E as lt,a as ct,b as ut,c as ft,d as _,e as U,t as G,f as N,g as ht,h as P,j as b,m as B,k as d,l as A,n as x,o as mt,p as M,q as C,r as dt,u as V,v as _t,w as gt,x as bt,y as At}from"./ECharts.BfJ7rUUm.js";import"./index.DgoW5roq.js";import{h as S}from"./colors.DRy8vmPD.js";import{C as xt,a as Ct,l as yt,c as kt,L as y,d as vt}from"./ChartLoadingSpinner.B-5RcHJx.js";function T(c){let t,e,o,i;return{c(){t=C("div"),e=C("span"),o=At(c[0]),this.h()},l(l){t=A(l,"DIV",{class:!0});var u=x(t);e=A(u,"SPAN",{class:!0,title:!0});var a=x(e);o=bt(a,c[0]),a.forEach(_),u.forEach(_),this.h()},h(){d(e,"class","text-[0.7rem]"),d(e,"title",i="Unit: "+c[0]),d(t,"class","absolute top-2 left-4 z-10")},m(l,u){P(l,t,u),b(t,e),b(e,o)},p(l,u){u&1&&gt(o,l[0]),u&1&&i!==(i="Unit: "+l[0])&&d(e,"title",i)},d(l){l&&_(t)}}}function Et(c){let t,e;return t=new kt({props:{color:c[1]}}),{c(){V(t.$$.fragment)},l(o){M(t.$$.fragment,o)},m(o,i){B(t,o,i),e=!0},p(o,i){const l={};i&2&&(l.color=o[1]),t.$set(l)},i(o){e||(N(t.$$.fragment,o),e=!0)},o(o){G(t.$$.fragment,o),e=!1},d(o){U(t,o)}}}function wt(c){let t,e,o,i,l,u,a=c[0]&&T(c);function g(n){c[10](n)}let m={init:ct,options:c[3],notMerge:!0,$$slots:{default:[Et]},$$scope:{ctx:c}};return c[2]!==void 0&&(m.chart=c[2]),i=new lt({props:m}),ut.push(()=>ft(i,"chart",g)),{c(){t=C("div"),a&&a.c(),e=dt(),o=C("div"),V(i.$$.fragment),this.h()},l(n){t=A(n,"DIV",{class:!0});var s=x(t);a&&a.l(s),e=mt(s),o=A(s,"DIV",{class:!0});var f=x(o);M(i.$$.fragment,f),f.forEach(_),s.forEach(_),this.h()},h(){d(o,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),d(t,"class","relative grow")},m(n,s){P(n,t,s),a&&a.m(t,null),b(t,e),b(t,o),B(i,o,null),u=!0},p(n,[s]){n[0]?a?a.p(n,s):(a=T(n),a.c(),a.m(t,e)):a&&(a.d(1),a=null);const f={};s&8&&(f.options=n[3]),s&8194&&(f.$$scope={dirty:s,ctx:n}),!l&&s&4&&(l=!0,f.chart=n[2],ht(()=>l=!1)),i.$set(f)},i(n){u||(N(i.$$.fragment,n),u=!0)},o(n){G(i.$$.fragment,n),u=!1},d(n){n&&_(t),a&&a.d(),U(i)}}}const F="en-US";function Lt(c,t,e){let{unit:o=""}=t,{xAxisAttribute:i="startedAt"}=t,{yAxisAttribute:l="value"}=t,{color:u=xt}=t,{colorOpacity:a=.55}=t,{backgroundColor:g=Ct}=t,{timeseries:m}=t,{onclick:n=yt}=t,s,f={};const q=(r,W,Y,v,j,K)=>{const X=S(v,j),H=S(y,.75),E=r.length-1,J=new Intl.NumberFormat(F,{maximumFractionDigits:0}),Q=new Intl.DateTimeFormat(F,{month:"short"}),w=r.reduce((h,D,O)=>{const I=O===E?v:X,rt=O===E?y:H;return h.xAxis.push(D[W]),h.yAxis.push({value:D[Y],itemStyle:{borderRadius:vt,borderWidth:1,borderColor:I,color:I},label:{show:!0,position:"top",color:rt,fontWeight:"bold",formatter:at=>{const R=at.value;return R===0?"":J.format(R)}}}),h},{xAxis:[],yAxis:[]}),L="2%",p="10%",Z={top:p,bottom:p,left:L,right:L},$={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},tt={type:"category",data:w.xAxis,axisLabel:{formatter:h=>Q.format(new Date(h)),color:y},axisLine:{show:!1},axisTick:{show:!1}},et={type:"value",show:!1,max:h=>h.max+h.max*(15/100)},ot={type:"bar",data:w.yAxis,barCategoryGap:10};e(3,f={backgroundColor:K,grid:Z,tooltip:$,xAxis:tt,yAxis:et,series:[ot]})},k=r=>{console.log("onChartClick",r),r.data&&n(m[r.dataIndex])};_t(()=>(s.on("click",k),console.log("EnergyOverviewChart - mounted",{chart:s}),()=>{s.off("click",k),console.log("EnergyOverviewChart - destroyed",{chart:s})}));function z(r){s=r,e(2,s)}return c.$$set=r=>{"unit"in r&&e(0,o=r.unit),"xAxisAttribute"in r&&e(4,i=r.xAxisAttribute),"yAxisAttribute"in r&&e(5,l=r.yAxisAttribute),"color"in r&&e(1,u=r.color),"colorOpacity"in r&&e(6,a=r.colorOpacity),"backgroundColor"in r&&e(7,g=r.backgroundColor),"timeseries"in r&&e(8,m=r.timeseries),"onclick"in r&&e(9,n=r.onclick)},c.$$.update=()=>{c.$$.dirty&498&&q(m,i,l,u,a,g)},[o,u,s,f,i,l,a,g,m,n,z]}class St extends it{constructor(t){super(),nt(this,t,Lt,wt,st,{unit:0,xAxisAttribute:4,yAxisAttribute:5,color:1,colorOpacity:6,backgroundColor:7,timeseries:8,onclick:9})}}export{St as E};

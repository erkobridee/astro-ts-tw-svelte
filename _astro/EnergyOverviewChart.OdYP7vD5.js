import{S as it,i as nt,s as st,E as lt,a as ct,b as ut,c as ft,d as _,e as U,t as G,f as N,g as ht,h as P,j as b,m as B,k as m,l as A,n as x,o as dt,p as M,q as C,r as mt,u as V,v as _t,w as gt,x as bt,y as At}from"./ECharts.ChHW2MM3.js";import"./index.Bjb2iLMq.js";import{C as xt,a as Ct,i as yt,c as kt,h as S,L as y,d as vt}from"./ChartLoadingSpinner.JeLiaD0h.js";function T(c){let t,e,o,i;return{c(){t=C("div"),e=C("span"),o=At(c[0]),this.h()},l(l){t=A(l,"DIV",{class:!0});var u=x(t);e=A(u,"SPAN",{class:!0,title:!0});var r=x(e);o=bt(r,c[0]),r.forEach(_),u.forEach(_),this.h()},h(){m(e,"class","text-[0.7rem]"),m(e,"title",i="Unit: "+c[0]),m(t,"class","absolute top-2 left-4 z-10")},m(l,u){P(l,t,u),b(t,e),b(e,o)},p(l,u){u&1&&gt(o,l[0]),u&1&&i!==(i="Unit: "+l[0])&&m(e,"title",i)},d(l){l&&_(t)}}}function Et(c){let t,e;return t=new kt({props:{color:c[1]}}),{c(){V(t.$$.fragment)},l(o){M(t.$$.fragment,o)},m(o,i){B(t,o,i),e=!0},p(o,i){const l={};i&2&&(l.color=o[1]),t.$set(l)},i(o){e||(N(t.$$.fragment,o),e=!0)},o(o){G(t.$$.fragment,o),e=!1},d(o){U(t,o)}}}function wt(c){let t,e,o,i,l,u,r=c[0]&&T(c);function g(n){c[10](n)}let d={init:ct,options:c[3],notMerge:!0,$$slots:{default:[Et]},$$scope:{ctx:c}};return c[2]!==void 0&&(d.chart=c[2]),i=new lt({props:d}),ut.push(()=>ft(i,"chart",g)),{c(){t=C("div"),r&&r.c(),e=mt(),o=C("div"),V(i.$$.fragment),this.h()},l(n){t=A(n,"DIV",{class:!0});var s=x(t);r&&r.l(s),e=dt(s),o=A(s,"DIV",{class:!0});var f=x(o);M(i.$$.fragment,f),f.forEach(_),s.forEach(_),this.h()},h(){m(o,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),m(t,"class","relative grow")},m(n,s){P(n,t,s),r&&r.m(t,null),b(t,e),b(t,o),B(i,o,null),u=!0},p(n,[s]){n[0]?r?r.p(n,s):(r=T(n),r.c(),r.m(t,e)):r&&(r.d(1),r=null);const f={};s&8&&(f.options=n[3]),s&8194&&(f.$$scope={dirty:s,ctx:n}),!l&&s&4&&(l=!0,f.chart=n[2],ht(()=>l=!1)),i.$set(f)},i(n){u||(N(i.$$.fragment,n),u=!0)},o(n){G(i.$$.fragment,n),u=!1},d(n){n&&_(t),r&&r.d(),U(i)}}}const F="en-US";function Lt(c,t,e){let{unit:o=""}=t,{xAxisAttribute:i="startedAt"}=t,{yAxisAttribute:l="value"}=t,{color:u=xt}=t,{colorOpacity:r=.55}=t,{backgroundColor:g=Ct}=t,{timeseries:d}=t,{onclick:n=yt}=t,s,f={};const q=(a,W,Y,v,j,K)=>{const X=S(v,j),H=S(y,.75),E=a.length-1,J=new Intl.NumberFormat(F,{maximumFractionDigits:0}),Q=new Intl.DateTimeFormat(F,{month:"short"}),w=a.reduce((h,D,O)=>{const I=O===E?v:X,at=O===E?y:H;return h.xAxis.push(D[W]),h.yAxis.push({value:D[Y],itemStyle:{borderRadius:vt,borderWidth:1,borderColor:I,color:I},label:{show:!0,position:"top",color:at,fontWeight:"bold",formatter:rt=>{const R=rt.value;return R===0?"":J.format(R)}}}),h},{xAxis:[],yAxis:[]}),L="2%",p="10%",Z={top:p,bottom:p,left:L,right:L},$={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},tt={type:"category",data:w.xAxis,axisLabel:{formatter:h=>Q.format(new Date(h)),color:y},axisLine:{show:!1},axisTick:{show:!1}},et={type:"value",show:!1,max:h=>h.max+h.max*(15/100)},ot={type:"bar",data:w.yAxis,barCategoryGap:10};e(3,f={backgroundColor:K,grid:Z,tooltip:$,xAxis:tt,yAxis:et,series:[ot]})},k=a=>{console.log("onChartClick",a),a.data&&n(d[a.dataIndex])};_t(()=>(s.on("click",k),console.log("EnergyOverviewChart - mounted",{chart:s}),()=>{s.off("click",k),console.log("EnergyOverviewChart - destroyed",{chart:s})}));function z(a){s=a,e(2,s)}return c.$$set=a=>{"unit"in a&&e(0,o=a.unit),"xAxisAttribute"in a&&e(4,i=a.xAxisAttribute),"yAxisAttribute"in a&&e(5,l=a.yAxisAttribute),"color"in a&&e(1,u=a.color),"colorOpacity"in a&&e(6,r=a.colorOpacity),"backgroundColor"in a&&e(7,g=a.backgroundColor),"timeseries"in a&&e(8,d=a.timeseries),"onclick"in a&&e(9,n=a.onclick)},c.$$.update=()=>{c.$$.dirty&498&&q(d,i,l,u,r,g)},[o,u,s,f,i,l,r,g,d,n,z]}class Rt extends it{constructor(t){super(),nt(this,t,Lt,wt,st,{unit:0,xAxisAttribute:4,yAxisAttribute:5,color:1,colorOpacity:6,backgroundColor:7,timeseries:8,onclick:9})}}export{Rt as E};

import{S as V,i as W,s as K,E as z,l as H,n as J,o as Q,d as b,a as X,t as Z,b as $,p as tt,c as et,q as ot,m as rt,e as k,f as R,g as v,h as st,j as T,k as nt,r as it}from"./ECharts.btR8DHUZ.js";import{d as at}from"./dayjs.min.Cbbdfn5l.js";import"./index.FyIYuhg6.js";const ct=(s,e=1)=>{s=s.toUpperCase();const r=parseInt(s.slice(1,3),16),n=parseInt(s.slice(3,5),16),c=parseInt(s.slice(5,7),16);return`rgba(${r}, ${n}, ${c}, ${e})`},lt="#f9fafb",ut="#9ca3af",xt="#0891b2",yt="#3b82f6",Ot="#f59e0b",_="#5c6660",ft=8,dt=()=>{};function ht(s){let e,r,n,c,l;function d(o){s[9](o)}let u={init:H,options:s[1],notMerge:!0};return s[0]!==void 0&&(u.chart=s[0]),n=new z({props:u}),J.push(()=>Q(n,"chart",d)),{c(){e=T("div"),r=T("div"),nt(n.$$.fragment),this.h()},l(o){e=R(o,"DIV",{class:!0});var a=v(e);r=R(a,"DIV",{class:!0});var i=v(r);st(n.$$.fragment,i),i.forEach(b),a.forEach(b),this.h()},h(){k(r,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),k(e,"class","relative grow")},m(o,a){et(o,e,a),ot(e,r),rt(n,r,null),l=!0},p(o,[a]){const i={};a&2&&(i.options=o[1]),!c&&a&1&&(c=!0,i.chart=o[0],tt(()=>c=!1)),n.$set(i)},i(o){l||($(n.$$.fragment,o),l=!0)},o(o){Z(n.$$.fragment,o),l=!1},d(o){o&&b(e),X(n)}}}const bt="en-US";function _t(s,e,r){let{xAxisAttribute:n="startedAt"}=e,{yAxisAttribute:c="value"}=e,{color:l=ut}=e,{colorOpacity:d=.5}=e,{backgroundColor:u=lt}=e,{timeseries:o}=e,{onclick:a=dt}=e,i,m={};const g=(t,f)=>t?((f<0||f>1)&&(f=1),ct(t,f)):"",w=(t,f,U,A,D,M)=>{const F=g(A,D),N=g(_,.7),x=t.length-1,p=new Intl.NumberFormat(bt,{maximumFractionDigits:0}),y=t.reduce((h,O,L)=>{const E=L===x?A:F,j=L===x?_:N;return h.xAxis.push(O[f]),h.yAxis.push({value:O[U],itemStyle:{borderRadius:ft,borderWidth:1,borderColor:E,color:E},label:{show:!0,position:"top",color:j,fontWeight:"bold",formatter:q=>{const I=q.value;return I===0?"":p.format(I)}}}),h},{xAxis:[],yAxis:[]}),G={top:30,bottom:30,left:10,right:10},B={type:"category",data:y.xAxis,axisLabel:{formatter:h=>at(h).format("MMM"),color:_},axisLine:{show:!1},axisTick:{show:!1}},P={type:"value",show:!1},Y={type:"bar",data:y.yAxis,barCategoryGap:10};r(1,m={backgroundColor:M,grid:G,xAxis:B,yAxis:P,series:[Y]})},C=t=>{console.log("onChartClick",t),t.data&&a(o[t.dataIndex])};it(()=>(i.on("click",C),console.log("EnergyOverviewChart - mounted",{chart:i}),()=>{i.off("click",C),console.log("EnergyOverviewChart - destroyed",{chart:i})}));function S(t){i=t,r(0,i)}return s.$$set=t=>{"xAxisAttribute"in t&&r(2,n=t.xAxisAttribute),"yAxisAttribute"in t&&r(3,c=t.yAxisAttribute),"color"in t&&r(4,l=t.color),"colorOpacity"in t&&r(5,d=t.colorOpacity),"backgroundColor"in t&&r(6,u=t.backgroundColor),"timeseries"in t&&r(7,o=t.timeseries),"onclick"in t&&r(8,a=t.onclick)},s.$$.update=()=>{s.$$.dirty&252&&w(o,n,c,l,d,u)},[i,m,n,c,l,d,u,o,a,S]}class Lt extends V{constructor(e){super(),W(this,e,_t,ht,K,{xAxisAttribute:2,yAxisAttribute:3,color:4,colorOpacity:5,backgroundColor:6,timeseries:7,onclick:8})}}export{yt as C,Lt as E,Ot as a,xt as b};

import{S as Z,i as $,s as tt,E as et,l as ot,n as st,o as rt,d,a as it,t as at,b as nt,p as lt,c as E,q as v,m as ct,e as m,f as g,g as C,v as ut,h as ft,j as A,w as dt,k as ht,r as mt,x as _t,y as bt,z as gt,A as S}from"./ECharts.Dld18E4S.js";import"./index.UBjwRMdK.js";const Ct=(r,t=1)=>{r=r.toUpperCase();const e=parseInt(r.slice(1,3),16),i=parseInt(r.slice(3,5),16),s=parseInt(r.slice(5,7),16);return`rgba(${e}, ${i}, ${s}, ${t})`},At="#f9fafb",yt="#9ca3af",Rt="#0891b2",Tt="#3b82f6",pt="#f59e0b",x="#5c6660",vt=8,xt=()=>{};function U(r){let t,e,i,s;return{c(){t=A("div"),e=A("span"),i=gt(r[0]),this.h()},l(c){t=g(c,"DIV",{class:!0});var u=C(t);e=g(u,"SPAN",{class:!0,title:!0});var a=C(e);i=bt(a,r[0]),a.forEach(d),u.forEach(d),this.h()},h(){m(e,"class","text-[0.7rem]"),m(e,"title",s="Unit: "+r[0]),m(t,"class","absolute top-1 left-2 z-10")},m(c,u){E(c,t,u),v(t,e),v(e,i)},p(c,u){u&1&&_t(i,c[0]),u&1&&s!==(s="Unit: "+c[0])&&m(e,"title",s)},d(c){c&&d(t)}}}function Et(r){let t,e;return{c(){t=A("div"),e=A("div"),this.h()},l(i){t=g(i,"DIV",{class:!0});var s=C(t);e=g(s,"DIV",{class:!0,style:!0}),C(e).forEach(d),s.forEach(d),this.h()},h(){m(e,"class","h-20 w-20 animate-spin rounded-full border-4 border-t-4 border-gray-200"),S(e,"border-top-color",r[1]),m(t,"class","flex h-full w-full items-center justify-center")},m(i,s){E(i,t,s),v(t,e)},p(i,s){s&2&&S(e,"border-top-color",i[1])},d(i){i&&d(t)}}}function Ot(r){let t,e,i,s,c,u,a=r[0]&&U(r);function y(n){r[10](n)}let _={init:ot,options:r[3],notMerge:!0,$$slots:{default:[Et]},$$scope:{ctx:r}};return r[2]!==void 0&&(_.chart=r[2]),s=new et({props:_}),st.push(()=>rt(s,"chart",y)),{c(){t=A("div"),a&&a.c(),e=dt(),i=A("div"),ht(s.$$.fragment),this.h()},l(n){t=g(n,"DIV",{class:!0});var l=C(t);a&&a.l(l),e=ut(l),i=g(l,"DIV",{class:!0});var f=C(i);ft(s.$$.fragment,f),f.forEach(d),l.forEach(d),this.h()},h(){m(i,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),m(t,"class","relative grow")},m(n,l){E(n,t,l),a&&a.m(t,null),v(t,e),v(t,i),ct(s,i,null),u=!0},p(n,[l]){n[0]?a?a.p(n,l):(a=U(n),a.c(),a.m(t,e)):a&&(a.d(1),a=null);const f={};l&8&&(f.options=n[3]),l&16386&&(f.$$scope={dirty:l,ctx:n}),!c&&l&4&&(c=!0,f.chart=n[2],lt(()=>c=!1)),s.$set(f)},i(n){u||(nt(s.$$.fragment,n),u=!0)},o(n){at(s.$$.fragment,n),u=!1},d(n){n&&d(t),a&&a.d(),it(s)}}}const F="en-US";function It(r,t,e){let{unit:i=""}=t,{xAxisAttribute:s="startedAt"}=t,{yAxisAttribute:c="value"}=t,{color:u=yt}=t,{colorOpacity:a=.5}=t,{backgroundColor:y=At}=t,{timeseries:_}=t,{onclick:n=xt}=t,l,f={};const O=(o,b)=>o?((b<0||b>1)&&(b=1),Ct(o,b)):"",N=(o,b,P,L,V,G)=>{const z=O(L,V),B=O(x,.75),k=o.length-1,Y=new Intl.NumberFormat(F,{maximumFractionDigits:0}),j=new Intl.DateTimeFormat(F,{weekday:"short"}),w=o.reduce((h,R,T)=>{const p=T===k?L:z,Q=T===k?x:B;return h.xAxis.push(R[b]),h.yAxis.push({value:R[P],itemStyle:{borderRadius:vt,borderWidth:1,borderColor:p,color:p},label:{show:!0,position:"top",color:Q,fontWeight:"bold",formatter:X=>{const D=X.value;return D===0?"":Y.format(D)}}}),h},{xAxis:[],yAxis:[]}),q={top:30,bottom:30,left:10,right:10},W={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},K={type:"category",data:w.xAxis,axisLabel:{formatter:h=>j.format(new Date(h)),color:x},axisLine:{show:!1},axisTick:{show:!1}},H={type:"value",show:!1,max:h=>h.max+h.max*(15/100)},J={type:"bar",data:w.yAxis,barCategoryGap:10};e(3,f={backgroundColor:G,grid:q,tooltip:W,xAxis:K,yAxis:H,series:[J]})},I=o=>{console.log("onChartClick",o),o.data&&n(_[o.dataIndex])};mt(()=>(l.on("click",I),console.log("EnergyOverviewChart - mounted",{chart:l}),()=>{l.off("click",I),console.log("EnergyOverviewChart - destroyed",{chart:l})}));function M(o){l=o,e(2,l)}return r.$$set=o=>{"unit"in o&&e(0,i=o.unit),"xAxisAttribute"in o&&e(4,s=o.xAxisAttribute),"yAxisAttribute"in o&&e(5,c=o.yAxisAttribute),"color"in o&&e(1,u=o.color),"colorOpacity"in o&&e(6,a=o.colorOpacity),"backgroundColor"in o&&e(7,y=o.backgroundColor),"timeseries"in o&&e(8,_=o.timeseries),"onclick"in o&&e(9,n=o.onclick)},r.$$.update=()=>{r.$$.dirty&498&&N(_,s,c,u,a,y)},[i,u,l,f,s,c,a,y,_,n,M]}class Dt extends Z{constructor(t){super(),$(this,t,It,Ot,tt,{unit:0,xAxisAttribute:4,yAxisAttribute:5,color:1,colorOpacity:6,backgroundColor:7,timeseries:8,onclick:9})}}export{Tt as C,Dt as E,pt as a,Rt as b};

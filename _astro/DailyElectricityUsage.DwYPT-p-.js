import{S as N,i as W,s as M,E as ct,a as ut,b as dt,c as ft,d as f,e as Y,t as j,f as q,g as ht,h as p,j as y,m as K,k as h,l as g,n as _,o as mt,p as H,q as b,r as gt,u as J,v as _t,w as bt,x as vt,y as Ct,z as P}from"./ECharts.DF4cteOg.js";import"./index.BiZfemjP.js";import{C as V,a as yt,D as At,h as z,b as B,L as pt,c as xt}from"./common.C16CT1O5.js";function G(s){let t,e,a,r;return{c(){t=b("div"),e=b("span"),a=Ct(s[0]),this.h()},l(o){t=g(o,"DIV",{class:!0});var c=_(t);e=g(c,"SPAN",{class:!0,title:!0});var l=_(e);a=vt(l,s[0]),l.forEach(f),c.forEach(f),this.h()},h(){h(e,"class","text-[0.7rem]"),h(e,"title",r="Unit: "+s[0]),h(t,"class","absolute top-2 left-4 z-10")},m(o,c){p(o,t,c),y(t,e),y(e,a)},p(o,c){c&1&&bt(a,o[0]),c&1&&r!==(r="Unit: "+o[0])&&h(e,"title",r)},d(o){o&&f(t)}}}function kt(s){let t,e;return{c(){t=b("div"),e=b("div"),this.h()},l(a){t=g(a,"DIV",{class:!0});var r=_(t);e=g(r,"DIV",{class:!0,style:!0}),_(e).forEach(f),r.forEach(f),this.h()},h(){h(e,"class","h-20 w-20 animate-spin rounded-full border-4 border-t-4 border-gray-200"),P(e,"border-top-color",s[1]),h(t,"class","flex h-full w-full items-center justify-center")},m(a,r){p(a,t,r),y(t,e)},p(a,r){r&2&&P(e,"border-top-color",a[1])},d(a){a&&f(t)}}}function wt(s){let t,e,a,r,o,c,l=s[0]&&G(s);function C(n){s[11](n)}let v={init:ut,options:s[3],notMerge:!0,$$slots:{default:[kt]},$$scope:{ctx:s}};return s[2]!==void 0&&(v.chart=s[2]),r=new ct({props:v}),dt.push(()=>ft(r,"chart",C)),{c(){t=b("div"),l&&l.c(),e=gt(),a=b("div"),J(r.$$.fragment),this.h()},l(n){t=g(n,"DIV",{class:!0});var u=_(t);l&&l.l(u),e=mt(u),a=g(u,"DIV",{class:!0});var d=_(a);H(r.$$.fragment,d),d.forEach(f),u.forEach(f),this.h()},h(){h(a,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),h(t,"class","relative grow")},m(n,u){p(n,t,u),l&&l.m(t,null),y(t,e),y(t,a),K(r,a,null),c=!0},p(n,[u]){n[0]?l?l.p(n,u):(l=G(n),l.c(),l.m(t,e)):l&&(l.d(1),l=null);const d={};u&8&&(d.options=n[3]),u&16386&&(d.$$scope={dirty:u,ctx:n}),!o&&u&4&&(o=!0,d.chart=n[2],ht(()=>o=!1)),r.$set(d)},i(n){c||(q(r.$$.fragment,n),c=!0)},o(n){j(r.$$.fragment,n),c=!1},d(n){n&&f(t),l&&l.d(),Y(r)}}}const Et="en-US";function St(s,t,e){let{unit:a=""}=t,{xAxisAttribute:r="startedAt"}=t,{yAxisAttribute:o="value"}=t,{currentColor:c=V}=t,{previousColor:l=V}=t,{colorOpacity:C=.7}=t,{backgroundColor:v=yt}=t,{data:n}=t,{onclick:u=At}=t,d,E={};const Q=(i,A,D,x,L,O,Z)=>{const $=z(x,O),tt=z(L,O),{current:I,previous:et}=i,T=I.length-1,rt=new Intl.DateTimeFormat(Et,{weekday:"short"}),k=I.reduce((m,U,w)=>{const R=w===T?x:$,F=w===T?L:tt;return m.xAxis.push(U[A]),m.current.push({value:U[D],itemStyle:{borderRadius:B,borderWidth:1,borderColor:R,color:R}}),m.previous.push({value:et[w][D],itemStyle:{borderRadius:B,borderWidth:1,borderColor:F,color:F}}),m},{xAxis:[],current:[],previous:[]}),at={top:30,bottom:30,left:"12%",right:10},ot={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},it={type:"category",data:k.xAxis,axisLabel:{formatter:m=>rt.format(new Date(m)),color:pt},axisLine:{show:!1},axisTick:{show:!1}},st={type:"value",show:!1},nt={type:"bar",data:k.previous},lt={type:"bar",data:k.current,barCategoryGap:30,markLine:{symbol:["none","none"],data:[{type:"average",x:20,lineStyle:{color:x,width:2,type:"solid"},emphasis:{disabled:!0},label:{show:!0,position:"insideStartTop",fontWeight:"bold",fontSize:12,formatter:m=>Number(m.value).toFixed(3)}},{type:"average",name:"Average",x:20,lineStyle:{color:"transparent"},label:{show:!0,position:"insideStartBottom",fontSize:12,formatter:"{b}",opacity:.8}}]}};e(3,E={backgroundColor:Z,grid:at,tooltip:ot,xAxis:it,yAxis:st,series:[nt,lt]})},S=i=>{if(console.log("onChartClick",i),!i.data)return;const A=i.dataIndex;u({current:n.current[A],previous:n.previous[A]})};_t(()=>(d.on("click",S),console.log("EnergyOverviewChart - mounted",{chart:d}),()=>{d.off("click",S),console.log("EnergyOverviewChart - destroyed",{chart:d})}));function X(i){d=i,e(2,d)}return s.$$set=i=>{"unit"in i&&e(0,a=i.unit),"xAxisAttribute"in i&&e(4,r=i.xAxisAttribute),"yAxisAttribute"in i&&e(5,o=i.yAxisAttribute),"currentColor"in i&&e(1,c=i.currentColor),"previousColor"in i&&e(6,l=i.previousColor),"colorOpacity"in i&&e(7,C=i.colorOpacity),"backgroundColor"in i&&e(8,v=i.backgroundColor),"data"in i&&e(9,n=i.data),"onclick"in i&&e(10,u=i.onclick)},s.$$.update=()=>{s.$$.dirty&1010&&Q(n,r,o,c,l,C,v)},[a,c,d,E,r,o,l,C,v,n,u,X]}class Dt extends N{constructor(t){super(),W(this,t,St,wt,M,{unit:0,xAxisAttribute:4,yAxisAttribute:5,currentColor:1,previousColor:6,colorOpacity:7,backgroundColor:8,data:9,onclick:10})}}function Lt(s){let t,e,a;return e=new Dt({props:{data:s[0],unit:"kWh",currentColor:xt,onclick:s[1]}}),{c(){t=b("div"),J(e.$$.fragment),this.h()},l(r){t=g(r,"DIV",{class:!0});var o=_(t);H(e.$$.fragment,o),o.forEach(f),this.h()},h(){h(t,"class","flex h-[300px] w-[600px]")},m(r,o){p(r,t,o),K(e,t,null),a=!0},p(r,[o]){const c={};o&1&&(c.data=r[0]),e.$set(c)},i(r){a||(q(e.$$.fragment,r),a=!0)},o(r){j(e.$$.fragment,r),a=!1},d(r){r&&f(t),Y(e)}}}function Ot(s,t,e){let{data:a}=t;const r=o=>{console.log("DailyElectricityUsage.onChartClick dayUsage:",o)};return s.$$set=o=>{"data"in o&&e(0,a=o.data)},[a,r]}class Ft extends N{constructor(t){super(),W(this,t,Ot,Lt,M,{data:0})}}export{Ft as default};

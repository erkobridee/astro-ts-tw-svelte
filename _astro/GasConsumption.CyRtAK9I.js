import{S as j,i as U,s as V,d as A,e as C,t as D,f as v,h as W,j as k,m as N,k as M,l as b,n as O,p as I,q as w,u as Y,b as G,c as P,g as q,w as z,o as R,A as B,x as F,r as K,y as J}from"./ECharts.CpYfIO0D.js";import{d as T}from"./dayjs.min.2rai63wT.js";import{E as Q,U as X,A as f,b as y,c as Z,d as x}from"./AggregationLevelSelection.Dy3oRmDF.js";import{T as $}from"./Toggle.DSrT7CON.js";import{n as ee,k as L,l as S}from"./ChartLoadingSpinner.BbKX_Jhn.js";import"./index.DACIwEDX.js";function te(c){let a,e;return a=new Z({props:{aggregation:c[0],energyType:x.GAS,layout:c[1],onclick:c[5]}}),{c(){Y(a.$$.fragment)},l(t){I(a.$$.fragment,t)},m(t,r){N(a,t,r),e=!0},p(t,r){const s={};r&1&&(s.aggregation=t[0]),r&2&&(s.layout=t[1]),a.$set(s)},i(t){e||(v(a.$$.fragment,t),e=!0)},o(t){D(a.$$.fragment,t),e=!1},d(t){C(a,t)}}}function se(c){let a,e,t,r,s,n,l="Data started at:",g,u,p=L(c[3])+"",E,d;function i(o){c[8](o)}let m={id:"showAverageToggle",label:"show average mark line"};return c[2]!==void 0&&(m.checked=c[2]),e=new $({props:m}),G.push(()=>P(e,"checked",i)),{c(){a=w("div"),Y(e.$$.fragment),r=K(),s=w("div"),n=w("span"),n.textContent=l,g=K(),u=w("span"),E=J(p),this.h()},l(o){a=b(o,"DIV",{class:!0});var h=O(a);I(e.$$.fragment,h),r=R(h),s=b(h,"DIV",{class:!0});var _=O(s);n=b(_,"SPAN",{"data-svelte-h":!0}),B(n)!=="svelte-1cta1ja"&&(n.textContent=l),g=R(_),u=b(_,"SPAN",{class:!0});var H=O(u);E=F(H,p),H.forEach(A),_.forEach(A),h.forEach(A),this.h()},h(){M(u,"class","font-semibold"),M(s,"class","flex items-center gap-1 text-sm"),M(a,"class","flex flex-col justify-between gap-4 md:flex-row md:items-center md:gap-0")},m(o,h){W(o,a,h),N(e,a,null),k(a,r),k(a,s),k(s,n),k(s,g),k(s,u),k(u,E),d=!0},p(o,h){const _={};!t&&h&4&&(t=!0,_.checked=o[2],q(()=>t=!1)),e.$set(_),(!d||h&8)&&p!==(p=L(o[3])+"")&&z(E,p)},i(o){d||(v(e.$$.fragment,o),d=!0)},o(o){D(e.$$.fragment,o),d=!1},d(o){o&&A(a),C(e)}}}function ae(c){let a,e,t,r;return t=new Q({props:{showAverageMarkline:c[2],onclick:c[6],color:ee,unit:X.M3,timeseries:c[4],aggregation:c[0],$$slots:{footer:[se],headerActions:[te]},$$scope:{ctx:c}}}),{c(){a=w("div"),e=w("div"),Y(t.$$.fragment),this.h()},l(s){a=b(s,"DIV",{class:!0});var n=O(a);e=b(n,"DIV",{class:!0});var l=O(e);I(t.$$.fragment,l),l.forEach(A),n.forEach(A),this.h()},h(){M(e,"class","absolute top-0 right-0 bottom-0 left-0"),M(a,"class","relative grow")},m(s,n){W(s,a,n),k(a,e),N(t,e,null),r=!0},p(s,[n]){const l={};n&4&&(l.showAverageMarkline=s[2]),n&16&&(l.timeseries=s[4]),n&1&&(l.aggregation=s[0]),n&1039&&(l.$$scope={dirty:n,ctx:s}),t.$set(l)},i(s){r||(v(t.$$.fragment,s),r=!0)},o(s){D(t.$$.fragment,s),r=!1},d(s){s&&A(a),C(t)}}}function re(c,a,e){let{data:t}=a,r=f.MONTH,s=y.YEAR,n=!1,l,g=[];const u=i=>{e(0,r=f.MONTH),e(1,s=y.YEAR),e(4,g=i.months),e(3,l=g[0].startedAt)},p=(i,m)=>{if(m===y.YEAR){switch(i){case f.MONTH:e(4,g=t.months);break;case f.WEEK:e(4,g=t.weeks);break}e(3,l=g[0].startedAt),e(0,r=i),e(1,s=m);return}const o=S(T(l).startOf("month"));switch(i){case f.WEEK:e(4,g=t.weeksMap[o]);break;case f.DAY:e(4,g=t.daysMap[o]);break}e(3,l=g[0].startedAt),e(0,r=i)},E=i=>{const{startedAt:m}=i;let o=S(m);if(s===y.YEAR){switch(r){case f.MONTH:e(0,r=f.WEEK),e(4,g=t.weeksMap[o]);break;case f.WEEK:o=S(T(m).startOf("month")),e(0,r=f.DAY),e(4,g=t.daysMap[o]);break}e(3,l=g[0].startedAt),e(1,s=y.MONTH);return}switch(r){case f.WEEK:o=S(T(m).startOf("month")),e(0,r=f.DAY),e(4,g=t.daysMap[o]);break;case f.DAY:e(0,r=f.HOUR),e(4,g=t.hoursMap[o]);break}e(3,l=g[0].startedAt)};function d(i){n=i,e(2,n)}return c.$$set=i=>{"data"in i&&e(7,t=i.data)},c.$$.update=()=>{c.$$.dirty&128&&u(t)},[r,s,n,l,g,p,E,t,d]}class fe extends j{constructor(a){super(),U(this,a,re,ae,V,{data:7})}}export{fe as default};

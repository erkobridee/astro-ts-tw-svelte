import{S as L,i as W,s as K,I as re,J as G,d as _,t as S,f as v,K as ie,L as ce,M as ue,N as J,O as fe,h as y,D as ge,P as he,l as A,n as M,q as E,Q,R as z,F as le,G as ne,T as U,w as j,j as k,k as T,x as V,o as R,y as q,r as C,e as N,m as Y,p as D,u as H,H as ae,b as me,c as de,g as _e}from"./ECharts.C5Iir41h.js";import{d as P}from"./dayjs.min.2rai63wT.js";import{e as X,u as be,o as pe,A as m,b as oe,E as ke,U as Ae}from"./EnergyChart.DeoKOa97.js";import{c as Z}from"./cn.BpZeWVFd.js";import{T as Ee}from"./Toggle.DGDEntvT.js";import{m as ve,j as x,p as I}from"./ChartLoadingSpinner.9-7-XflD.js";import"./index.BAn-HqPX.js";const b={YEAR:"YEAR",MONTH:"MONTH",DAY:"DAY"};function Se(o){let e,t,s,l,n,u;const f=o[6].default,a=re(f,o,o[5],null);let c=[{type:"button"},{class:t=Z(o[2],o[3].class)},{disabled:s=o[0]||o[3].disabled},o[4]],i={};for(let r=0;r<c.length;r+=1)i=G(i,c[r]);return{c(){e=E("button"),a&&a.c(),this.h()},l(r){e=A(r,"BUTTON",{type:!0,class:!0});var g=M(e);a&&a.l(g),g.forEach(_),this.h()},h(){J(e,i)},m(r,g){y(r,e,g),a&&a.m(e,null),e.autofocus&&e.focus(),l=!0,n||(u=ge(e,"click",function(){he(o[1])&&o[1].apply(this,arguments)}),n=!0)},p(r,[g]){o=r,a&&a.p&&(!l||g&32)&&ie(a,f,o,o[5],l?ue(f,o[5],g,null):ce(o[5]),null),J(e,i=fe(c,[{type:"button"},(!l||g&8&&t!==(t=Z(o[2],o[3].class)))&&{class:t},(!l||g&9&&s!==(s=o[0]||o[3].disabled))&&{disabled:s},g&16&&o[4]]))},i(r){l||(v(a,r),l=!0)},o(r){S(a,r),l=!1},d(r){r&&_(e),a&&a.d(r),n=!1,u()}}}function ye(o,e,t){const s=["isSelected","onclick"];let l=Q(e,s),{$$slots:n={},$$scope:u}=e,{isSelected:f=!1}=e,{onclick:a}=e;const c=`
    rounded-md border border-slate-300
    px-2 py-1
    text-center text-sm
    transition-all shadow-sm hover:shadow-lg
    text-slate-700
    cursor-pointer
    hover:text-white hover:bg-blue-500 hover:border-blue-500 hover:bg-blue-500
    focus:text-white focus:bg-blue-500 focus:border-blue-500 focus:bg-blue-500
    active:border-blue-500 active:text-white active:bg-blue-500
    disabled:pointer-events-none disabled:shadow-none disabled:border-transparent
  `;return o.$$set=i=>{t(3,e=G(G({},e),z(i))),t(4,l=Q(e,s)),"isSelected"in i&&t(0,f=i.isSelected),"onclick"in i&&t(1,a=i.onclick),"$$scope"in i&&t(5,u=i.$$scope)},e=z(e),[f,a,c,e,l,u,n]}class Me extends L{constructor(e){super(),W(this,e,ye,Se,K,{isSelected:0,onclick:1})}}function $(o,e,t){const s=o.slice();return s[2]=e[t],s[4]=t,s}function ee(o){let e,t,s,l,n=[],u=new Map,f,a=X(o[1]);const c=i=>i[4];for(let i=0;i<a.length;i+=1){let r=$(o,a,i),g=c(r);u.set(g,n[i]=se(g,r))}return{c(){e=E("ul"),t=E("span"),s=q(o[0]),l=C();for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=A(i,"UL",{class:!0});var r=M(e);t=A(r,"SPAN",{class:!0});var g=M(t);s=V(g,o[0]),g.forEach(_),l=R(r);for(let h=0;h<n.length;h+=1)n[h].l(r);r.forEach(_),this.h()},h(){T(t,"class","font-semibold"),T(e,"class","flex-inline flex items-center gap-1")},m(i,r){y(i,e,r),k(e,t),k(t,s),k(e,l);for(let g=0;g<n.length;g+=1)n[g]&&n[g].m(e,null);f=!0},p(i,r){(!f||r&1)&&j(s,i[0]),r&2&&(a=X(i[1]),le(),n=be(n,r,c,1,i,a,u,e,pe,se,null,$),ne())},i(i){if(!f){for(let r=0;r<a.length;r+=1)v(n[r]);f=!0}},o(i){for(let r=0;r<n.length;r+=1)S(n[r]);f=!1},d(i){i&&_(e);for(let r=0;r<n.length;r+=1)n[r].d()}}}function te(o){let e,t="/";return{c(){e=E("span"),e.textContent=t},l(s){e=A(s,"SPAN",{"data-svelte-h":!0}),ae(e)!=="svelte-ocknwt"&&(e.textContent=t)},m(s,l){y(s,e,l)},d(s){s&&_(e)}}}function Oe(o){let e=o[2].label+"",t;return{c(){t=q(e)},l(s){t=V(s,e)},m(s,l){y(s,t,l)},p(s,l){l&2&&e!==(e=s[2].label+"")&&j(t,e)},d(s){s&&_(t)}}}function se(o,e){let t,s,l,n,u,f,a=e[4]>0&&te();return n=new Me({props:{isSelected:e[2].isSelected,onclick:e[2].onclick,$$slots:{default:[Oe]},$$scope:{ctx:e}}}),{key:o,first:null,c(){t=U(),a&&a.c(),s=C(),l=E("li"),H(n.$$.fragment),u=C(),this.h()},l(c){t=U(),a&&a.l(c),s=R(c),l=A(c,"LI",{});var i=M(l);D(n.$$.fragment,i),u=R(i),i.forEach(_),this.h()},h(){this.first=t},m(c,i){y(c,t,i),a&&a.m(c,i),y(c,s,i),y(c,l,i),Y(n,l,null),k(l,u),f=!0},p(c,i){e=c,e[4]>0?a||(a=te(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null);const r={};i&2&&(r.isSelected=e[2].isSelected),i&2&&(r.onclick=e[2].onclick),i&34&&(r.$$scope={dirty:i,ctx:e}),n.$set(r)},i(c){f||(v(n.$$.fragment,c),f=!0)},o(c){S(n.$$.fragment,c),f=!1},d(c){c&&(_(t),_(s),_(l)),a&&a.d(c),N(n)}}}function Te(o){let e,t,s=o[1].length>0&&ee(o);return{c(){s&&s.c(),e=U()},l(l){s&&s.l(l),e=U()},m(l,n){s&&s.m(l,n),y(l,e,n),t=!0},p(l,[n]){l[1].length>0?s?(s.p(l,n),n&2&&v(s,1)):(s=ee(l),s.c(),v(s,1),s.m(e.parentNode,e)):s&&(le(),S(s,1,1,()=>{s=null}),ne())},i(l){t||(v(s),t=!0)},o(l){S(s),t=!1},d(l){l&&_(e),s&&s.d(l)}}}function we(o,e,t){let{label:s}=e,{list:l}=e;return o.$$set=n=>{"label"in n&&t(0,s=n.label),"list"in n&&t(1,l=n.list)},[s,l]}class B extends L{constructor(e){super(),W(this,e,we,Te,K,{label:0,list:1})}}function Ne(o){let e,t,s,l,n,u,f;return t=new B({props:{label:"Year",list:o[0]}}),l=new B({props:{label:"Month",list:o[1]}}),u=new B({props:{label:"Day",list:o[2]}}),{c(){e=E("div"),H(t.$$.fragment),s=C(),H(l.$$.fragment),n=C(),H(u.$$.fragment),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=M(e);D(t.$$.fragment,c),s=R(c),D(l.$$.fragment,c),n=R(c),D(u.$$.fragment,c),c.forEach(_),this.h()},h(){T(e,"class","flex flex-col gap-4 md:flex-row md:items-center")},m(a,c){y(a,e,c),Y(t,e,null),k(e,s),Y(l,e,null),k(e,n),Y(u,e,null),f=!0},p(a,[c]){const i={};c&1&&(i.list=a[0]),t.$set(i);const r={};c&2&&(r.list=a[1]),l.$set(r);const g={};c&4&&(g.list=a[2]),u.$set(g)},i(a){f||(v(t.$$.fragment,a),v(l.$$.fragment,a),v(u.$$.fragment,a),f=!0)},o(a){S(t.$$.fragment,a),S(l.$$.fragment,a),S(u.$$.fragment,a),f=!1},d(a){a&&_(e),N(t),N(l),N(u)}}}function Ye(o,e,t){let{energyType:s}=e,{aggregation:l}=e,{layout:n=b.YEAR}=e,{onclick:u}=e,f=[],a=[],c=[];const i=(g,h,p)=>{const d=p===b.YEAR;t(1,a=[]),t(2,c=[]),t(0,f=[{label:"Months",isSelected:d&&h===m.MONTH,onclick:r(m.MONTH,b.YEAR)},{label:"Weeks",isSelected:d&&h===m.WEEK,onclick:r(m.WEEK,b.YEAR)}]),p===b.MONTH&&(t(1,a=[{label:"Weeks",isSelected:h===m.WEEK,onclick:r(m.WEEK,b.MONTH)}]),[m.DAY,m.HOUR].includes(h)&&a.push({label:"Days",isSelected:h===m.DAY,onclick:r(m.DAY,b.MONTH)}),g===oe.GAS&&h===m.HOUR&&a.push({label:"Hours",isSelected:h===m.HOUR,onclick:r(m.HOUR,b.MONTH)})),p===b.DAY&&t(2,c=[{label:"Hours",isSelected:h===m.HOUR,onclick:r(m.HOUR,b.DAY)},{label:"Minutes",isSelected:h===m.MINUTES,onclick:r(m.MINUTES,b.DAY)}])},r=(g,h)=>p=>u(g,h);return o.$$set=g=>{"energyType"in g&&t(3,s=g.energyType),"aggregation"in g&&t(4,l=g.aggregation),"layout"in g&&t(5,n=g.layout),"onclick"in g&&t(6,u=g.onclick)},o.$$.update=()=>{o.$$.dirty&56&&i(s,l,n)},[f,a,c,s,l,n,u]}class De extends L{constructor(e){super(),W(this,e,Ye,Ne,K,{energyType:3,aggregation:4,layout:5,onclick:6})}}function He(o){let e,t;return e=new De({props:{aggregation:o[0],energyType:oe.GAS,layout:o[1],onclick:o[5]}}),{c(){H(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){Y(e,s,l),t=!0},p(s,l){const n={};l&1&&(n.aggregation=s[0]),l&2&&(n.layout=s[1]),e.$set(n)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Re(o){let e,t,s,l,n,u,f="Data started at:",a,c,i=x(o[3])+"",r,g;function h(d){o[8](d)}let p={id:"showAverageToggle",label:"show average mark line"};return o[2]!==void 0&&(p.checked=o[2]),t=new Ee({props:p}),me.push(()=>de(t,"checked",h)),{c(){e=E("div"),H(t.$$.fragment),l=C(),n=E("div"),u=E("span"),u.textContent=f,a=C(),c=E("span"),r=q(i),this.h()},l(d){e=A(d,"DIV",{class:!0});var O=M(e);D(t.$$.fragment,O),l=R(O),n=A(O,"DIV",{class:!0});var w=M(n);u=A(w,"SPAN",{"data-svelte-h":!0}),ae(u)!=="svelte-1cta1ja"&&(u.textContent=f),a=R(w),c=A(w,"SPAN",{class:!0});var F=M(c);r=V(F,i),F.forEach(_),w.forEach(_),O.forEach(_),this.h()},h(){T(c,"class","font-semibold"),T(n,"class","flex items-center gap-1 text-sm"),T(e,"class","flex flex-col justify-between gap-4 md:flex-row md:items-center md:gap-0")},m(d,O){y(d,e,O),Y(t,e,null),k(e,l),k(e,n),k(n,u),k(n,a),k(n,c),k(c,r),g=!0},p(d,O){const w={};!s&&O&4&&(s=!0,w.checked=d[2],_e(()=>s=!1)),t.$set(w),(!g||O&8)&&i!==(i=x(d[3])+"")&&j(r,i)},i(d){g||(v(t.$$.fragment,d),g=!0)},o(d){S(t.$$.fragment,d),g=!1},d(d){d&&_(e),N(t)}}}function Ce(o){let e,t,s,l;return s=new ke({props:{showAverageMarkline:o[2],onclick:o[6],color:ve,unit:Ae.M3,timeseries:o[4],aggregation:o[0],$$slots:{footer:[Re],headerActions:[He]},$$scope:{ctx:o}}}),{c(){e=E("div"),t=E("div"),H(s.$$.fragment),this.h()},l(n){e=A(n,"DIV",{class:!0});var u=M(e);t=A(u,"DIV",{class:!0});var f=M(t);D(s.$$.fragment,f),f.forEach(_),u.forEach(_),this.h()},h(){T(t,"class","absolute top-0 right-0 bottom-0 left-0"),T(e,"class","relative grow")},m(n,u){y(n,e,u),k(e,t),Y(s,t,null),l=!0},p(n,[u]){const f={};u&4&&(f.showAverageMarkline=n[2]),u&16&&(f.timeseries=n[4]),u&1&&(f.aggregation=n[0]),u&1039&&(f.$$scope={dirty:u,ctx:n}),s.$set(f)},i(n){l||(v(s.$$.fragment,n),l=!0)},o(n){S(s.$$.fragment,n),l=!1},d(n){n&&_(e),N(s)}}}function Ie(o,e,t){let{data:s}=e,l=m.MONTH,n=b.YEAR,u=!1,f,a=[];const c=h=>{t(0,l=m.MONTH),t(1,n=b.YEAR),t(4,a=h.months),t(3,f=a[0].startedAt)},i=(h,p)=>{if(p===b.YEAR){switch(h){case m.MONTH:t(4,a=s.months);break;case m.WEEK:t(4,a=s.weeks);break}t(3,f=a[0].startedAt),t(0,l=h),t(1,n=p);return}const d=I(P(f).startOf("month"));switch(h){case m.WEEK:t(4,a=s.weeksMap[d]);break;case m.DAY:t(4,a=s.daysMap[d]);break}t(3,f=a[0].startedAt),t(0,l=h)},r=h=>{const{startedAt:p}=h;let d=I(p);if(n===b.YEAR){switch(l){case m.MONTH:t(0,l=m.WEEK),t(4,a=s.weeksMap[d]);break;case m.WEEK:d=I(P(p).startOf("month")),t(0,l=m.DAY),t(4,a=s.daysMap[d]);break}t(3,f=a[0].startedAt),t(1,n=b.MONTH);return}switch(l){case m.WEEK:d=I(P(p).startOf("month")),t(0,l=m.DAY),t(4,a=s.daysMap[d]);break;case m.DAY:t(0,l=m.HOUR),t(4,a=s.hoursMap[d]);break}t(3,f=a[0].startedAt)};function g(h){u=h,t(2,u)}return o.$$set=h=>{"data"in h&&t(7,s=h.data)},o.$$.update=()=>{o.$$.dirty&128&&c(s)},[l,n,u,f,a,i,r,s,g]}class je extends L{constructor(e){super(),W(this,e,Ie,Ce,K,{data:7})}}export{je as default};

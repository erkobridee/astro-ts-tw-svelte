import{S as Z,i as $,s as tt,E as et,l as ot,n as st,o as rt,d,a as it,t as at,b as nt,p as lt,c as v,q as y,m as ct,e as m,f as b,g,v as ut,h as ft,j as C,w as dt,k as ht,r as mt,x as _t,y as bt,z as gt,A as p}from"./ECharts.Dld18E4S.js";import"./index.UBjwRMdK.js";const D=(s,t=1)=>{if(!s)return"";(t<0||t>1)&&(t=1),s=s.toUpperCase();const e=parseInt(s.slice(1,3),16),i=parseInt(s.slice(3,5),16),o=parseInt(s.slice(5,7),16);return`rgba(${e}, ${i}, ${o}, ${t})`},Ct="#f9fafb",At="#9ca3af",wt="#0891b2",Rt="#3b82f6",Tt="#f59e0b",O="#5c6660",yt=8,Ot=()=>{};function S(s){let t,e,i,o;return{c(){t=C("div"),e=C("span"),i=gt(s[0]),this.h()},l(c){t=b(c,"DIV",{class:!0});var u=g(t);e=b(u,"SPAN",{class:!0,title:!0});var a=g(e);i=bt(a,s[0]),a.forEach(d),u.forEach(d),this.h()},h(){m(e,"class","text-[0.7rem]"),m(e,"title",o="Unit: "+s[0]),m(t,"class","absolute top-1 left-2 z-10")},m(c,u){v(c,t,u),y(t,e),y(e,i)},p(c,u){u&1&&_t(i,c[0]),u&1&&o!==(o="Unit: "+c[0])&&m(e,"title",o)},d(c){c&&d(t)}}}function vt(s){let t,e;return{c(){t=C("div"),e=C("div"),this.h()},l(i){t=b(i,"DIV",{class:!0});var o=g(t);e=b(o,"DIV",{class:!0,style:!0}),g(e).forEach(d),o.forEach(d),this.h()},h(){m(e,"class","h-20 w-20 animate-spin rounded-full border-4 border-t-4 border-gray-200"),p(e,"border-top-color",s[1]),m(t,"class","flex h-full w-full items-center justify-center")},m(i,o){v(i,t,o),y(t,e)},p(i,o){o&2&&p(e,"border-top-color",i[1])},d(i){i&&d(t)}}}function Et(s){let t,e,i,o,c,u,a=s[0]&&S(s);function A(n){s[10](n)}let _={init:ot,options:s[3],notMerge:!0,$$slots:{default:[vt]},$$scope:{ctx:s}};return s[2]!==void 0&&(_.chart=s[2]),o=new et({props:_}),st.push(()=>rt(o,"chart",A)),{c(){t=C("div"),a&&a.c(),e=dt(),i=C("div"),ht(o.$$.fragment),this.h()},l(n){t=b(n,"DIV",{class:!0});var l=g(t);a&&a.l(l),e=ut(l),i=b(l,"DIV",{class:!0});var f=g(i);ft(o.$$.fragment,f),f.forEach(d),l.forEach(d),this.h()},h(){m(i,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),m(t,"class","relative grow")},m(n,l){v(n,t,l),a&&a.m(t,null),y(t,e),y(t,i),ct(o,i,null),u=!0},p(n,[l]){n[0]?a?a.p(n,l):(a=S(n),a.c(),a.m(t,e)):a&&(a.d(1),a=null);const f={};l&8&&(f.options=n[3]),l&8194&&(f.$$scope={dirty:l,ctx:n}),!c&&l&4&&(c=!0,f.chart=n[2],lt(()=>c=!1)),o.$set(f)},i(n){u||(nt(o.$$.fragment,n),u=!0)},o(n){at(o.$$.fragment,n),u=!1},d(n){n&&d(t),a&&a.d(),it(o)}}}const U="en-US";function xt(s,t,e){let{unit:i=""}=t,{xAxisAttribute:o="startedAt"}=t,{yAxisAttribute:c="value"}=t,{color:u=At}=t,{colorOpacity:a=.5}=t,{backgroundColor:A=Ct}=t,{timeseries:_}=t,{onclick:n=Ot}=t,l,f={};const F=(r,M,P,x,V,G)=>{const z=D(x,V),B=D(O,.75),I=r.length-1,Y=new Intl.NumberFormat(U,{maximumFractionDigits:0}),j=new Intl.DateTimeFormat(U,{month:"short"}),L=r.reduce((h,k,w)=>{const R=w===I?x:z,Q=w===I?O:B;return h.xAxis.push(k[M]),h.yAxis.push({value:k[P],itemStyle:{borderRadius:yt,borderWidth:1,borderColor:R,color:R},label:{show:!0,position:"top",color:Q,fontWeight:"bold",formatter:X=>{const T=X.value;return T===0?"":Y.format(T)}}}),h},{xAxis:[],yAxis:[]}),q={top:30,bottom:30,left:10,right:10},W={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},K={type:"category",data:L.xAxis,axisLabel:{formatter:h=>j.format(new Date(h)),color:O},axisLine:{show:!1},axisTick:{show:!1}},H={type:"value",show:!1,max:h=>h.max+h.max*(15/100)},J={type:"bar",data:L.yAxis,barCategoryGap:10};e(3,f={backgroundColor:G,grid:q,tooltip:W,xAxis:K,yAxis:H,series:[J]})},E=r=>{console.log("onChartClick",r),r.data&&n(_[r.dataIndex])};mt(()=>(l.on("click",E),console.log("EnergyOverviewChart - mounted",{chart:l}),()=>{l.off("click",E),console.log("EnergyOverviewChart - destroyed",{chart:l})}));function N(r){l=r,e(2,l)}return s.$$set=r=>{"unit"in r&&e(0,i=r.unit),"xAxisAttribute"in r&&e(4,o=r.xAxisAttribute),"yAxisAttribute"in r&&e(5,c=r.yAxisAttribute),"color"in r&&e(1,u=r.color),"colorOpacity"in r&&e(6,a=r.colorOpacity),"backgroundColor"in r&&e(7,A=r.backgroundColor),"timeseries"in r&&e(8,_=r.timeseries),"onclick"in r&&e(9,n=r.onclick)},s.$$.update=()=>{s.$$.dirty&498&&F(_,o,c,u,a,A)},[i,u,l,f,o,c,a,A,_,n,N]}class pt extends Z{constructor(t){super(),$(this,t,xt,Et,tt,{unit:0,xAxisAttribute:4,yAxisAttribute:5,color:1,colorOpacity:6,backgroundColor:7,timeseries:8,onclick:9})}}export{Rt as C,pt as E,Tt as a,wt as b};

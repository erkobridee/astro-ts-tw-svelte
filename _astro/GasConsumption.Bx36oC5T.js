import{S as B,i as F,s as J,d as p,e as D,t as h,f as m,h as I,j as b,m as N,k as C,l as w,n as O,p as v,q as y,u as Y,b as Q,c as X,g as Z,w as $,o as j,B as x,x as ee,r as U,y as te,z as q,A as z,C as T}from"./ECharts.gyAWcHNC.js";import{d as R}from"./dayjs.min.2rai63wT.js";import{E as se,A as u,b as M,U as re,c as ae,d as ne,e as oe}from"./AggregationLevelSelection.CbnAY4aX.js";import{T as le}from"./Toggle.BW8rRgkn.js";import{p as ce,m as V,n as S}from"./ChartLoadingSpinner.VLEi_YsM.js";import"./index.BrkFAe0P.js";function K(n){const s=n.slice(),t=s[4][s[12]];return s[13]=t,s}function L(n){const s=n.slice(),t=s[11][0]?.dataIndex;return s[12]=t,s}function ie(n){let s,t;return s=new ae({props:{aggregation:n[0],energyType:ne.GAS,layout:n[1],onclick:n[5]}}),{c(){Y(s.$$.fragment)},l(e){v(s.$$.fragment,e)},m(e,r){N(s,e,r),t=!0},p(e,r){const a={};r&1&&(a.aggregation=e[0]),r&2&&(a.layout=e[1]),s.$set(a)},i(e){t||(m(s.$$.fragment,e),t=!0)},o(e){h(s.$$.fragment,e),t=!1},d(e){D(s,e)}}}function fe(n){let s,t,e,r,a,o,c="Data started at:",i,_,d=V(n[3])+"",E,k;function H(l){n[9](l)}let g={id:"showAverageToggle",label:"show average mark line"};return n[2]!==void 0&&(g.checked=n[2]),t=new le({props:g}),Q.push(()=>X(t,"checked",H)),{c(){s=y("div"),Y(t.$$.fragment),r=U(),a=y("div"),o=y("span"),o.textContent=c,i=U(),_=y("span"),E=te(d),this.h()},l(l){s=w(l,"DIV",{class:!0});var f=O(s);v(t.$$.fragment,f),r=j(f),a=w(f,"DIV",{class:!0});var A=O(a);o=w(A,"SPAN",{"data-svelte-h":!0}),x(o)!=="svelte-1cta1ja"&&(o.textContent=c),i=j(A),_=w(A,"SPAN",{class:!0});var W=O(_);E=ee(W,d),W.forEach(p),A.forEach(p),f.forEach(p),this.h()},h(){C(_,"class","font-semibold"),C(a,"class","flex items-center gap-1 text-sm"),C(s,"class","flex flex-col justify-between gap-4 md:flex-row md:items-center md:gap-0")},m(l,f){I(l,s,f),N(t,s,null),b(s,r),b(s,a),b(a,o),b(a,i),b(a,_),b(_,E),k=!0},p(l,f){const A={};!e&&f&4&&(e=!0,A.checked=l[2],Z(()=>e=!1)),t.$set(A),(!k||f&8)&&d!==(d=V(l[3])+"")&&$(E,d)},i(l){k||(m(t.$$.fragment,l),k=!0)},o(l){h(t.$$.fragment,l),k=!1},d(l){l&&p(s),D(t)}}}function G(n){let s,t,e=n[4].length>n[12]&&P(K(n));return{c(){e&&e.c(),s=T()},l(r){e&&e.l(r),s=T()},m(r,a){e&&e.m(r,a),I(r,s,a),t=!0},p(r,a){r[4].length>r[12]?e?(e.p(K(r),a),a&2064&&m(e,1)):(e=P(K(r)),e.c(),m(e,1),e.m(s.parentNode,s)):e&&(q(),h(e,1,1,()=>{e=null}),z())},i(r){t||(m(e),t=!0)},o(r){h(e),t=!1},d(r){r&&p(s),e&&e.d(r)}}}function P(n){let s,t;return s=new oe({props:{params:n[11],currentItem:n[13],aggregation:n[0],unit:n[7]}}),{c(){Y(s.$$.fragment)},l(e){v(s.$$.fragment,e)},m(e,r){N(s,e,r),t=!0},p(e,r){const a={};r&2048&&(a.params=e[11]),r&2064&&(a.currentItem=e[13]),r&1&&(a.aggregation=e[0]),s.$set(a)},i(e){t||(m(s.$$.fragment,e),t=!0)},o(e){h(s.$$.fragment,e),t=!1},d(e){D(s,e)}}}function ge(n){let s,t,e=n[11]!==void 0&&G(L(n));return{c(){e&&e.c(),s=T()},l(r){e&&e.l(r),s=T()},m(r,a){e&&e.m(r,a),I(r,s,a),t=!0},p(r,a){r[11]!==void 0?e?(e.p(L(r),a),a&2048&&m(e,1)):(e=G(L(r)),e.c(),m(e,1),e.m(s.parentNode,s)):e&&(q(),h(e,1,1,()=>{e=null}),z())},i(r){t||(m(e),t=!0)},o(r){h(e),t=!1},d(r){r&&p(s),e&&e.d(r)}}}function ue(n){let s,t,e,r;return e=new se({props:{showAverageMarkline:n[2],onclick:n[6],color:ce,unit:n[7],timeseries:n[4],aggregation:n[0],$$slots:{tooltip:[ge,({params:a})=>({11:a}),({params:a})=>a?2048:0],footer:[fe],headerActions:[ie]},$$scope:{ctx:n}}}),{c(){s=y("div"),t=y("div"),Y(e.$$.fragment),this.h()},l(a){s=w(a,"DIV",{class:!0});var o=O(s);t=w(o,"DIV",{class:!0});var c=O(t);v(e.$$.fragment,c),c.forEach(p),o.forEach(p),this.h()},h(){C(t,"class","absolute top-0 right-0 bottom-0 left-0"),C(s,"class","relative grow")},m(a,o){I(a,s,o),b(s,t),N(e,t,null),r=!0},p(a,[o]){const c={};o&4&&(c.showAverageMarkline=a[2]),o&16&&(c.timeseries=a[4]),o&1&&(c.aggregation=a[0]),o&18463&&(c.$$scope={dirty:o,ctx:a}),e.$set(c)},i(a){r||(m(e.$$.fragment,a),r=!0)},o(a){h(e.$$.fragment,a),r=!1},d(a){a&&p(s),D(e)}}}function me(n,s,t){let{data:e}=s,r=u.MONTH,a=M.YEAR,o=!1,c,i=[];const _=g=>{t(0,r=u.MONTH),t(1,a=M.YEAR),t(4,i=g.months),t(3,c=i[0].startedAt)},d=(g,l)=>{if(l===M.YEAR){switch(g){case u.MONTH:t(4,i=e.months);break;case u.WEEK:t(4,i=e.weeks);break}t(3,c=i[0].startedAt),t(0,r=g),t(1,a=l);return}const f=S(R(c).startOf("month"));switch(g){case u.WEEK:t(4,i=e.weeksMap[f]);break;case u.DAY:t(4,i=e.daysMap[f]);break}t(3,c=i[0].startedAt),t(0,r=g)},E=g=>{const{startedAt:l}=g;let f=S(l);if(a===M.YEAR){switch(r){case u.MONTH:t(0,r=u.WEEK),t(4,i=e.weeksMap[f]);break;case u.WEEK:f=S(R(l).startOf("month")),t(0,r=u.DAY),t(4,i=e.daysMap[f]);break}t(3,c=i[0].startedAt),t(1,a=M.MONTH);return}switch(r){case u.WEEK:f=S(R(l).startOf("month")),t(0,r=u.DAY),t(4,i=e.daysMap[f]);break;case u.DAY:t(0,r=u.HOUR),t(4,i=e.hoursMap[f]);break}t(3,c=i[0].startedAt)},k=re.M3;function H(g){o=g,t(2,o)}return n.$$set=g=>{"data"in g&&t(8,e=g.data)},n.$$.update=()=>{n.$$.dirty&256&&_(e)},[r,a,o,c,i,d,E,k,e,H]}class be extends B{constructor(s){super(),F(this,s,me,ue,J,{data:8})}}export{be as default};

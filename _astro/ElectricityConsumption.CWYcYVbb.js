import{S as q,i as z,s as F,z as H,d as p,h as k,k as g,l as b,n as N,q as A,A as ae,B as se,C as U,w as J,j as m,D as V,o as y,x as M,r as P,y as w,e as Q,t as Z,f as x,m as $,p as ee,u as te,F as j}from"./ECharts.CMTmjA4R.js";import{e as K,u as ne,d as le,E as oe,a as v,U as O,A as S}from"./EnergyChart.CQdGk_k_.js";import{c as R}from"./cn.BpZeWVFd.js";import{h as D,j as W,k as re,l as ie}from"./ChartLoadingSpinner.J9-af1Bz.js";import"./dayjs.min.2rai63wT.js";import"./index.CpdGVk7n.js";function X(r,t,e){const a=r.slice();a[9]=t[e],a[12]=e;const u=a[9].disabled||a[2];return a[10]=u,a}function G(r,t){let e,a,u,l=!1,s,n,o,_=t[9].label+"",E,h,i,C,T,I,f;return T=ae(t[8][0]),{key:r,first:null,c(){e=A("label"),a=A("input"),n=P(),o=A("span"),E=w(_),i=P(),this.h()},l(c){e=b(c,"LABEL",{class:!0});var d=N(e);a=b(d,"INPUT",{class:!0,type:!0,name:!0}),n=y(d),o=b(d,"SPAN",{class:!0});var L=N(o);E=M(L,_),L.forEach(p),i=y(d),d.forEach(p),this.h()},h(){g(a,"class","peer hidden"),g(a,"type","radio"),g(a,"name",t[1]),a.__value=u=t[9].value,U(a,a.__value),a.disabled=s=t[10],g(o,"class",h=R(Y,{"rounded-l-md":t[12]===0,"rounded-r-md":t[12]===t[4]})),g(e,"class",C=R("inline-flex items-center rounded-md text-gray-800",{"cursor-pointer":!t[10]})),T.p(a),this.first=e},m(c,d){k(c,e,d),m(e,a),a.checked=a.__value===t[0],m(e,n),m(e,o),m(o,E),m(e,i),I||(f=[V(a,"change",t[7]),V(a,"input",t[5])],I=!0)},p(c,d){t=c,d&2&&g(a,"name",t[1]),d&8&&u!==(u=t[9].value)&&(a.__value=u,U(a,a.__value),l=!0),d&12&&s!==(s=t[10])&&(a.disabled=s),(l||d&9)&&(a.checked=a.__value===t[0]),d&8&&_!==(_=t[9].label+"")&&J(E,_),d&24&&h!==(h=R(Y,{"rounded-l-md":t[12]===0,"rounded-r-md":t[12]===t[4]}))&&g(o,"class",h),d&12&&C!==(C=R("inline-flex items-center rounded-md text-gray-800",{"cursor-pointer":!t[10]}))&&g(e,"class",C)},d(c){c&&p(e),T.r(),I=!1,se(f)}}}function ce(r){let t,e=[],a=new Map,u=K(r[3]);const l=s=>s[9].value;for(let s=0;s<u.length;s+=1){let n=X(r,u,s),o=l(n);a.set(o,e[s]=G(o,n))}return{c(){t=A("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=b(s,"DIV",{class:!0});var n=N(t);for(let o=0;o<e.length;o+=1)e[o].l(n);n.forEach(p),this.h()},h(){g(t,"class","flex items-center")},m(s,n){k(s,t,n);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(s,[n]){n&63&&(u=K(s[3]),e=ne(e,n,l,1,s,u,a,t,le,G,null,X))},i:H,o:H,d(s){s&&p(t);for(let n=0;n<e.length;n+=1)e[n].d()}}}const ue=()=>{},Y="bg-gray-300 px-4 py-1 peer-checked:bg-blue-300 peer-disabled:opacity-50";function de(r,t,e){let a,{name:u}=t,{selected:l}=t,{disabled:s=!1}=t,{list:n}=t,{onchange:o=ue}=t;const _=i=>{o(i.target?.value)},E=[[]];function h(){l=this.__value,e(0,l)}return r.$$set=i=>{"name"in i&&e(1,u=i.name),"selected"in i&&e(0,l=i.selected),"disabled"in i&&e(2,s=i.disabled),"list"in i&&e(3,n=i.list),"onchange"in i&&e(6,o=i.onchange)},r.$$.update=()=>{r.$$.dirty&8&&e(4,a=n.length-1)},[l,u,s,n,a,_,o,h,E]}class _e extends q{constructor(t){super(),z(this,t,de,ce,F,{name:1,selected:0,disabled:2,list:3,onchange:6})}}function fe(r){let t;return{c(){t=w("Electricity Consumption header actions")},l(e){t=M(e,"Electricity Consumption header actions")},m(e,a){k(e,t,a)},d(e){e&&p(t)}}}function he(r){let t,e,a,u="Consumption",l,s,n,o,_,E="Data started at:",h,i,C=W(r[5])+"",T,I;return s=new _e({props:{name:"buttons-toggle",selected:r[0],onchange:r[7],list:[{label:"Measured",value:v.PLAIN},{label:"Repartition",value:v.REPARTITION},{label:"Exceedance",value:v.EXCEEDANCE,disabled:!0}]}}),{c(){t=A("div"),e=A("div"),a=A("span"),a.textContent=u,l=P(),te(s.$$.fragment),n=P(),o=A("div"),_=A("span"),_.textContent=E,h=P(),i=A("span"),T=w(C),this.h()},l(f){t=b(f,"DIV",{class:!0});var c=N(t);e=b(c,"DIV",{class:!0});var d=N(e);a=b(d,"SPAN",{"data-svelte-h":!0}),j(a)!=="svelte-1vrp2az"&&(a.textContent=u),l=y(d),ee(s.$$.fragment,d),d.forEach(p),n=y(c),o=b(c,"DIV",{class:!0});var L=N(o);_=b(L,"SPAN",{"data-svelte-h":!0}),j(_)!=="svelte-1cta1ja"&&(_.textContent=E),h=y(L),i=b(L,"SPAN",{class:!0});var B=N(i);T=M(B,C),B.forEach(p),L.forEach(p),c.forEach(p),this.h()},h(){g(e,"class","flex items-center gap-2"),g(i,"class","font-semibold"),g(o,"class","flex items-center gap-1 text-sm"),g(t,"class","flex items-center justify-between pt-2")},m(f,c){k(f,t,c),m(t,e),m(e,a),m(e,l),$(s,e,null),m(t,n),m(t,o),m(o,_),m(o,h),m(o,i),m(i,T),I=!0},p(f,c){const d={};c&1&&(d.selected=f[0]),s.$set(d),(!I||c&32)&&C!==(C=W(f[5])+"")&&J(T,C)},i(f){I||(x(s.$$.fragment,f),I=!0)},o(f){Z(s.$$.fragment,f),I=!1},d(f){f&&p(t),Q(s)}}}function me(r){let t,e,a,u;return a=new oe({props:{type:r[0],color:r[1],labels:r[2],unit:r[3],aggregation:r[4],timeseries:r[6],onclick:r[8],$$slots:{footer:[he],headerActions:[fe]},$$scope:{ctx:r}}}),{c(){t=A("div"),e=A("div"),te(a.$$.fragment),this.h()},l(l){t=b(l,"DIV",{class:!0});var s=N(t);e=b(s,"DIV",{class:!0});var n=N(e);ee(a.$$.fragment,n),n.forEach(p),s.forEach(p),this.h()},h(){g(e,"class","absolute top-0 right-0 bottom-0 left-0"),g(t,"class","relative grow")},m(l,s){k(l,t,s),m(t,e),$(a,e,null),u=!0},p(l,[s]){const n={};s&1&&(n.type=l[0]),s&2&&(n.color=l[1]),s&4&&(n.labels=l[2]),s&8&&(n.unit=l[3]),s&16&&(n.aggregation=l[4]),s&64&&(n.timeseries=l[6]),s&16417&&(n.$$scope={dirty:s,ctx:l}),a.$set(n)},i(l){u||(x(a.$$.fragment,l),u=!0)},o(l){Z(a.$$.fragment,l),u=!1},d(l){l&&p(t),Q(a)}}}function ge(r,t,e){const a={[`${v.PLAIN}`]:["Consumption","Exceedance"],[`${v.PLAIN}_EXCEEDANCE`]:["Consumption","Exceedance"],[`${v.REPARTITION}`]:["Shared with me","Bought from market"]},u={[`${v.PLAIN}`]:[D],[`${v.PLAIN}_EXCEEDANCE`]:[D,ie],[`${v.REPARTITION}`]:[re,D]};let l=v.PLAIN,s=[D],n=["Consumption","Exceedance"],o=O.KWH,_=S.MONTH,E,h=[],{data:i}=t;const C=c=>{e(0,l=v.PLAIN),e(3,o=O.KWH),e(4,_=S.MONTH),e(6,h=c.months.plain),e(5,E=h[0].startedAt),e(1,s=u[l]),e(2,n=a[l])},T=c=>{e(0,l=c),I()},I=()=>{e(3,o=_===S.MINUTES?O.KW:O.KWH),e(6,h=i.months[l===v.REPARTITION?"repartition":"plain"]),e(5,E=h[0].startedAt),e(1,s=u[l]),e(2,n=a[l]),console.log("ElectricityConsumption.updateTimeseries",{type:l,aggregation:_,color:s,labels:n,data:i})},f=c=>{console.log("ElectricityConsumption.onChartClick timeserie:",c)};return r.$$set=c=>{"data"in c&&e(9,i=c.data)},r.$$.update=()=>{r.$$.dirty&512&&C(i)},[l,s,n,o,_,E,h,T,f,i]}class Ie extends q{constructor(t){super(),z(this,t,ge,me,F,{data:9})}}export{Ie as default};

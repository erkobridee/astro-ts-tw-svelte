import{S as j,i as q,s as K,E as ht,a as gt,b as mt,c as _t,d as f,e as X,t as H,f as J,g as bt,h as w,j as A,m as Q,k as g,l as _,n as b,o as vt,p as Z,q as v,r as yt,u as $,v as Ct,w as pt,x as kt,y as At,z as V}from"./ECharts.DF4cteOg.js";import"./index.BiZfemjP.js";import{C as z,a as wt,D as xt,h as W,b as B,L as Dt,c as Et}from"./common.C16CT1O5.js";function Y(n){let t,e,r,a;return{c(){t=v("div"),e=v("span"),r=At(n[0]),this.h()},l(o){t=_(o,"DIV",{class:!0});var c=b(t);e=_(c,"SPAN",{class:!0,title:!0});var l=b(e);r=kt(l,n[0]),l.forEach(f),c.forEach(f),this.h()},h(){g(e,"class","text-[0.7rem]"),g(e,"title",a="Unit: "+n[0]),g(t,"class","absolute top-2 left-4 z-10")},m(o,c){w(o,t,c),A(t,e),A(e,r)},p(o,c){c&1&&pt(r,o[0]),c&1&&a!==(a="Unit: "+o[0])&&g(e,"title",a)},d(o){o&&f(t)}}}function St(n){let t,e;return{c(){t=v("div"),e=v("div"),this.h()},l(r){t=_(r,"DIV",{class:!0});var a=b(t);e=_(a,"DIV",{class:!0,style:!0}),b(e).forEach(f),a.forEach(f),this.h()},h(){g(e,"class","h-20 w-20 animate-spin rounded-full border-4 border-t-4 border-gray-200"),V(e,"border-top-color",n[1]),g(t,"class","flex h-full w-full items-center justify-center")},m(r,a){w(r,t,a),A(t,e)},p(r,a){a&2&&V(e,"border-top-color",r[1])},d(r){r&&f(t)}}}function It(n){let t,e,r,a,o,c,l=n[0]&&Y(n);function k(s){n[11](s)}let y={init:gt,options:n[3],notMerge:!0,$$slots:{default:[St]},$$scope:{ctx:n}};return n[2]!==void 0&&(y.chart=n[2]),a=new ht({props:y}),mt.push(()=>_t(a,"chart",k)),{c(){t=v("div"),l&&l.c(),e=yt(),r=v("div"),$(a.$$.fragment),this.h()},l(s){t=_(s,"DIV",{class:!0});var u=b(t);l&&l.l(u),e=vt(u),r=_(u,"DIV",{class:!0});var d=b(r);Z(a.$$.fragment,d),d.forEach(f),u.forEach(f),this.h()},h(){g(r,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),g(t,"class","relative grow")},m(s,u){w(s,t,u),l&&l.m(t,null),A(t,e),A(t,r),Q(a,r,null),c=!0},p(s,[u]){s[0]?l?l.p(s,u):(l=Y(s),l.c(),l.m(t,e)):l&&(l.d(1),l=null);const d={};u&8&&(d.options=s[3]),u&16386&&(d.$$scope={dirty:u,ctx:s}),!o&&u&4&&(o=!0,d.chart=s[2],bt(()=>o=!1)),a.$set(d)},i(s){c||(J(a.$$.fragment,s),c=!0)},o(s){H(a.$$.fragment,s),c=!1},d(s){s&&f(t),l&&l.d(),X(a)}}}const M="en-US";function Lt(n,t,e){let{unit:r=""}=t,{xAxisAttribute:a="startedAt"}=t,{yAxisAttribute:o="value"}=t,{currentColor:c=z}=t,{previousColor:l=z}=t,{colorOpacity:k=.55}=t,{backgroundColor:y=wt}=t,{data:s}=t,{onclick:u=xt}=t,d,S={};const tt=(i,C,L,x,O,T,at)=>{const rt=W(x,T),ot=W(O,T),{current:U,previous:R}=i,F=U.length-1,it=new Intl.DateTimeFormat(M),nt=new Intl.DateTimeFormat(M,{weekday:"short"}),D=U.reduce((h,p,m)=>{const G=m===F?x:rt,N=m===F?O:ot;return h.xAxis.push(p[C]),h.current.push({value:p[L],date:p[C],itemStyle:{borderRadius:B,borderWidth:1,borderColor:G,color:G}}),h.previous.push({value:R[m][L],date:R[m][C],itemStyle:{borderRadius:B,borderWidth:1,borderColor:N,color:N}}),h},{xAxis:[],current:[],previous:[]}),E="2%",P=30,st={top:P,bottom:P,left:"15%",right:E},lt={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:h=>{let p="";return h.forEach(m=>{p+=`
            <div>
              <span style="display:inline-block;border-radius:10px;width:10px;height:10px;background-color:${m.color};"></span>
              <span>${it.format(new Date(m.data.date))}</span>
              <span style="float:right;margin-left:20px;font-weight:600">${m.value}</span>
            </div>
          `}),p}},ct={type:"category",data:D.xAxis,axisLabel:{formatter:h=>nt.format(new Date(h)),color:Dt},axisLine:{show:!1},axisTick:{show:!1}},ut={type:"value",show:!1},dt={type:"bar",data:D.previous},ft={type:"bar",data:D.current,barCategoryGap:30,markLine:{symbol:["none","none"],data:[{type:"average",x:E,lineStyle:{color:x,width:2,type:"solid"},emphasis:{disabled:!0},label:{show:!0,position:"insideStartTop",fontWeight:"bold",fontSize:12,formatter:h=>Number(h.value).toFixed(3)}},{type:"average",name:"Average",x:E,lineStyle:{color:"transparent"},label:{show:!0,position:"insideStartBottom",fontSize:12,formatter:"{b}",opacity:.8}}]}};e(3,S={backgroundColor:at,grid:st,tooltip:lt,xAxis:ct,yAxis:ut,series:[dt,ft]})},I=i=>{if(console.log("onChartClick",i),!i.data)return;const C=i.dataIndex;u({current:s.current[C],previous:s.previous[C]})};Ct(()=>(d.on("click",I),console.log("EnergyOverviewChart - mounted",{chart:d}),()=>{d.off("click",I),console.log("EnergyOverviewChart - destroyed",{chart:d})}));function et(i){d=i,e(2,d)}return n.$$set=i=>{"unit"in i&&e(0,r=i.unit),"xAxisAttribute"in i&&e(4,a=i.xAxisAttribute),"yAxisAttribute"in i&&e(5,o=i.yAxisAttribute),"currentColor"in i&&e(1,c=i.currentColor),"previousColor"in i&&e(6,l=i.previousColor),"colorOpacity"in i&&e(7,k=i.colorOpacity),"backgroundColor"in i&&e(8,y=i.backgroundColor),"data"in i&&e(9,s=i.data),"onclick"in i&&e(10,u=i.onclick)},n.$$.update=()=>{n.$$.dirty&1010&&tt(s,a,o,c,l,k,y)},[r,c,d,S,a,o,l,k,y,s,u,et]}class Ot extends j{constructor(t){super(),q(this,t,Lt,It,K,{unit:0,xAxisAttribute:4,yAxisAttribute:5,currentColor:1,previousColor:6,colorOpacity:7,backgroundColor:8,data:9,onclick:10})}}function Tt(n){let t,e,r;return e=new Ot({props:{data:n[0],unit:"kWh",currentColor:Et,onclick:n[1]}}),{c(){t=v("div"),$(e.$$.fragment),this.h()},l(a){t=_(a,"DIV",{class:!0});var o=b(t);Z(e.$$.fragment,o),o.forEach(f),this.h()},h(){g(t,"class","flex h-[360px] w-[550px]")},m(a,o){w(a,t,o),Q(e,t,null),r=!0},p(a,[o]){const c={};o&1&&(c.data=a[0]),e.$set(c)},i(a){r||(J(e.$$.fragment,a),r=!0)},o(a){H(e.$$.fragment,a),r=!1},d(a){a&&f(t),X(e)}}}function Ut(n,t,e){let{data:r}=t;const a=o=>{console.log("DailyElectricityUsage.onChartClick dayUsage:",o)};return n.$$set=o=>{"data"in o&&e(0,r=o.data)},[r,a]}class Nt extends j{constructor(t){super(),q(this,t,Ut,Tt,K,{data:0})}}export{Nt as default};

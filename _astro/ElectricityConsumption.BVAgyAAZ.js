import{S as B,i as $,s as F,d as h,e as K,t as U,f as W,h as w,j as f,m as X,k as v,l as C,n as P,p as Y,q as A,u as q,x,y as z,b as G,c as J,g as Q,w as Z,z as V,o as S,r as D}from"./ECharts.BA_zIMAu.js";import{E as ee,a as c,U as O,A as M}from"./EnergyChart.BE1zykAn.js";import{T as te}from"./Toggle.DtV3VRQV.js";import{h as y,j,k as se,l as ae}from"./ChartLoadingSpinner.DTggnxbL.js";import"./dayjs.min.2rai63wT.js";import"./index.hEkYiYuq.js";function ne(o){let a;return{c(){a=z("Electricity Consumption header actions")},l(e){a=x(e,"Electricity Consumption header actions")},m(e,r){w(e,a,r)},d(e){e&&h(a)}}}function oe(o){let a,e,r,p="Consumption",t,s,i,I,l,m,_="Data started at:",d,E,u=j(o[6])+"",R,T;function k(n){o[10](n)}let b={id:"chartTypeToggle",layout:"labels",label:["Measured","Repartition"]};return o[0]!==void 0&&(b.checked=o[0]),s=new te({props:b}),G.push(()=>J(s,"checked",k)),{c(){a=A("div"),e=A("div"),r=A("span"),r.textContent=p,t=D(),q(s.$$.fragment),I=D(),l=A("div"),m=A("span"),m.textContent=_,d=D(),E=A("span"),R=z(u),this.h()},l(n){a=C(n,"DIV",{class:!0});var g=P(a);e=C(g,"DIV",{class:!0});var N=P(e);r=C(N,"SPAN",{"data-svelte-h":!0}),V(r)!=="svelte-1vrp2az"&&(r.textContent=p),t=S(N),Y(s.$$.fragment,N),N.forEach(h),I=S(g),l=C(g,"DIV",{class:!0});var L=P(l);m=C(L,"SPAN",{"data-svelte-h":!0}),V(m)!=="svelte-1cta1ja"&&(m.textContent=_),d=S(L),E=C(L,"SPAN",{class:!0});var H=P(E);R=x(H,u),H.forEach(h),L.forEach(h),g.forEach(h),this.h()},h(){v(e,"class","flex items-center gap-2"),v(E,"class","font-semibold"),v(l,"class","flex items-center gap-1 text-sm"),v(a,"class","flex items-center justify-between pt-2")},m(n,g){w(n,a,g),f(a,e),f(e,r),f(e,t),X(s,e,null),f(a,I),f(a,l),f(l,m),f(l,d),f(l,E),f(E,R),T=!0},p(n,g){const N={};!i&&g&1&&(i=!0,N.checked=n[0],Q(()=>i=!1)),s.$set(N),(!T||g&64)&&u!==(u=j(n[6])+"")&&Z(R,u)},i(n){T||(W(s.$$.fragment,n),T=!0)},o(n){U(s.$$.fragment,n),T=!1},d(n){n&&h(a),K(s)}}}function re(o){let a,e,r,p;return r=new ee({props:{type:o[1],color:o[2],labels:o[3],unit:o[4],aggregation:o[5],timeseries:o[7],onclick:o[8],$$slots:{footer:[oe],headerActions:[ne]},$$scope:{ctx:o}}}),{c(){a=A("div"),e=A("div"),q(r.$$.fragment),this.h()},l(t){a=C(t,"DIV",{class:!0});var s=P(a);e=C(s,"DIV",{class:!0});var i=P(e);Y(r.$$.fragment,i),i.forEach(h),s.forEach(h),this.h()},h(){v(e,"class","absolute top-0 right-0 bottom-0 left-0"),v(a,"class","relative grow")},m(t,s){w(t,a,s),f(a,e),X(r,e,null),p=!0},p(t,[s]){const i={};s&2&&(i.type=t[1]),s&4&&(i.color=t[2]),s&8&&(i.labels=t[3]),s&16&&(i.unit=t[4]),s&32&&(i.aggregation=t[5]),s&128&&(i.timeseries=t[7]),s&65601&&(i.$$scope={dirty:s,ctx:t}),r.$set(i)},i(t){p||(W(r.$$.fragment,t),p=!0)},o(t){U(r.$$.fragment,t),p=!1},d(t){t&&h(a),K(r)}}}function ie(o,a,e){const r={[`${c.PLAIN}`]:["Consumption","Exceedance"],[`${c.PLAIN}_EXCEEDANCE`]:["Consumption","Exceedance"],[`${c.REPARTITION}`]:["Shared with me","Bought from market"]},p={[`${c.PLAIN}`]:[y],[`${c.PLAIN}_EXCEEDANCE`]:[y,ae],[`${c.REPARTITION}`]:[se,y]};let t=c.PLAIN,s=[y],i=["Consumption","Exceedance"],I=O.KWH,l=M.MONTH,m,_=[],{data:d}=a;const E=n=>{e(1,t=c.PLAIN),e(4,I=O.KWH),e(5,l=M.MONTH),e(7,_=n.months.plain),e(6,m=_[0].startedAt),e(2,s=p[t]),e(3,i=r[t])};let u=!1;const R=n=>{e(1,t=n?c.REPARTITION:c.PLAIN),T()},T=()=>{e(4,I=l===M.MINUTES?O.KW:O.KWH),e(7,_=d.months[t===c.REPARTITION?"repartition":"plain"]),e(6,m=_[0].startedAt),e(2,s=p[t]),e(3,i=r[t]),console.log("ElectricityConsumption.updateTimeseries",{type:t,aggregation:l,color:s,labels:i,data:d})},k=n=>{console.log("ElectricityConsumption.onChartClick timeserie:",n)};function b(n){u=n,e(0,u)}return o.$$set=n=>{"data"in n&&e(9,d=n.data)},o.$$.update=()=>{o.$$.dirty&512&&E(d),o.$$.dirty&1&&R(u)},[u,t,s,i,I,l,m,_,k,d,b]}class de extends B{constructor(a){super(),$(this,a,ie,re,F,{data:9})}}export{de as default};

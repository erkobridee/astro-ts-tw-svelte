import{S as Z,i as $,s as tt,E as et,a as ot,b as rt,c as st,d as h,e as at,t as it,f as nt,g as lt,h as v,j as x,m as ct,k as m,l as b,n as g,o as ut,p as ft,q as A,r as ht,u as dt,v as mt,w as _t,x as bt,y as gt,z as R}from"./ECharts.DF4cteOg.js";import"./index.BiZfemjP.js";import{C as At,a as yt,f as xt,h as S,L as C,b as Ct}from"./common.C16CT1O5.js";function T(l){let t,e,a,o;return{c(){t=A("div"),e=A("span"),a=gt(l[0]),this.h()},l(c){t=b(c,"DIV",{class:!0});var u=g(t);e=b(u,"SPAN",{class:!0,title:!0});var s=g(e);a=bt(s,l[0]),s.forEach(h),u.forEach(h),this.h()},h(){m(e,"class","text-[0.7rem]"),m(e,"title",o="Unit: "+l[0]),m(t,"class","absolute top-1 left-2 z-10")},m(c,u){v(c,t,u),x(t,e),x(e,a)},p(c,u){u&1&&_t(a,c[0]),u&1&&o!==(o="Unit: "+c[0])&&m(e,"title",o)},d(c){c&&h(t)}}}function vt(l){let t,e;return{c(){t=A("div"),e=A("div"),this.h()},l(a){t=b(a,"DIV",{class:!0});var o=g(t);e=b(o,"DIV",{class:!0,style:!0}),g(e).forEach(h),o.forEach(h),this.h()},h(){m(e,"class","h-20 w-20 animate-spin rounded-full border-4 border-t-4 border-gray-200"),R(e,"border-top-color",l[1]),m(t,"class","flex h-full w-full items-center justify-center")},m(a,o){v(a,t,o),x(t,e)},p(a,o){o&2&&R(e,"border-top-color",a[1])},d(a){a&&h(t)}}}function Et(l){let t,e,a,o,c,u,s=l[0]&&T(l);function y(i){l[10](i)}let _={init:ot,options:l[3],notMerge:!0,$$slots:{default:[vt]},$$scope:{ctx:l}};return l[2]!==void 0&&(_.chart=l[2]),o=new et({props:_}),rt.push(()=>st(o,"chart",y)),{c(){t=A("div"),s&&s.c(),e=ht(),a=A("div"),dt(o.$$.fragment),this.h()},l(i){t=b(i,"DIV",{class:!0});var n=g(t);s&&s.l(n),e=ut(n),a=b(n,"DIV",{class:!0});var f=g(a);ft(o.$$.fragment,f),f.forEach(h),n.forEach(h),this.h()},h(){m(a,"class","absolute top-0 right-0 bottom-0 left-0 overflow-hidden rounded-lg border border-gray-100"),m(t,"class","relative grow")},m(i,n){v(i,t,n),s&&s.m(t,null),x(t,e),x(t,a),ct(o,a,null),u=!0},p(i,[n]){i[0]?s?s.p(i,n):(s=T(i),s.c(),s.m(t,e)):s&&(s.d(1),s=null);const f={};n&8&&(f.options=i[3]),n&8194&&(f.$$scope={dirty:n,ctx:i}),!c&&n&4&&(c=!0,f.chart=i[2],lt(()=>c=!1)),o.$set(f)},i(i){u||(nt(o.$$.fragment,i),u=!0)},o(i){it(o.$$.fragment,i),u=!1},d(i){i&&h(t),s&&s.d(),at(o)}}}const F="en-US";function kt(l,t,e){let{unit:a=""}=t,{xAxisAttribute:o="startedAt"}=t,{yAxisAttribute:c="value"}=t,{color:u=At}=t,{colorOpacity:s=.5}=t,{backgroundColor:y=yt}=t,{timeseries:_}=t,{onclick:i=xt}=t,n,f={};const U=(r,z,B,k,G,M)=>{const j=S(k,G),q=S(C,.75),w=r.length-1,N=new Intl.NumberFormat(F,{maximumFractionDigits:0}),P=new Intl.DateTimeFormat(F,{month:"short"}),L=r.reduce((d,O,p)=>{const D=p===w?k:j,Q=p===w?C:q;return d.xAxis.push(O[z]),d.yAxis.push({value:O[B],itemStyle:{borderRadius:Ct,borderWidth:1,borderColor:D,color:D},label:{show:!0,position:"top",color:Q,fontWeight:"bold",formatter:X=>{const I=X.value;return I===0?"":N.format(I)}}}),d},{xAxis:[],yAxis:[]}),W={top:30,bottom:30,left:10,right:10},K={trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:()=>""},Y={type:"category",data:L.xAxis,axisLabel:{formatter:d=>P.format(new Date(d)),color:C},axisLine:{show:!1},axisTick:{show:!1}},H={type:"value",show:!1,max:d=>d.max+d.max*(15/100)},J={type:"bar",data:L.yAxis,barCategoryGap:10};e(3,f={backgroundColor:M,grid:W,tooltip:K,xAxis:Y,yAxis:H,series:[J]})},E=r=>{console.log("onChartClick",r),r.data&&i(_[r.dataIndex])};mt(()=>(n.on("click",E),console.log("EnergyOverviewChart - mounted",{chart:n}),()=>{n.off("click",E),console.log("EnergyOverviewChart - destroyed",{chart:n})}));function V(r){n=r,e(2,n)}return l.$$set=r=>{"unit"in r&&e(0,a=r.unit),"xAxisAttribute"in r&&e(4,o=r.xAxisAttribute),"yAxisAttribute"in r&&e(5,c=r.yAxisAttribute),"color"in r&&e(1,u=r.color),"colorOpacity"in r&&e(6,s=r.colorOpacity),"backgroundColor"in r&&e(7,y=r.backgroundColor),"timeseries"in r&&e(8,_=r.timeseries),"onclick"in r&&e(9,i=r.onclick)},l.$$.update=()=>{l.$$.dirty&498&&U(_,o,c,u,s,y)},[a,u,n,f,o,c,s,y,_,i,V]}class Dt extends Z{constructor(t){super(),$(this,t,kt,Et,tt,{unit:0,xAxisAttribute:4,yAxisAttribute:5,color:1,colorOpacity:6,backgroundColor:7,timeseries:8,onclick:9})}}export{Dt as E};

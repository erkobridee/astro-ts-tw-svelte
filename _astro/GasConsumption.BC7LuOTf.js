import{S as B,i as F,s as J,d as p,c as D,t as h,e as m,g as I,h as b,m as N,j as C,k as w,l as O,n as v,p as y,q as Y,b as Q,a as X,f as Z,w as $,o as j,B as x,x as ee,r as U,y as te,z as q,A as z,C as T}from"./ECharts.DmQrCDqA.js";import{d as R}from"./dayjs.min.2rai63wT.js";import{E as se,A as u,b as M,U as ae,c as re,d as ne,e as oe}from"./AggregationLevelSelection.BUUPcyLB.js";import{T as le}from"./Toggle.DeByRyyD.js";import{p as ce,m as V,n as S}from"./ChartLoadingSpinner.Dcx7V5Ob.js";import"./index.D9YmPLD7.js";function K(n){const s=n.slice(),t=s[4][s[12]];return s[13]=t,s}function L(n){const s=n.slice(),t=s[11][0]?.dataIndex;return s[12]=t,s}function ie(n){let s,t;return s=new re({props:{aggregation:n[0],energyType:ne.GAS,layout:n[1],onclick:n[5]}}),{c(){Y(s.$$.fragment)},l(e){v(s.$$.fragment,e)},m(e,a){N(s,e,a),t=!0},p(e,a){const r={};a&1&&(r.aggregation=e[0]),a&2&&(r.layout=e[1]),s.$set(r)},i(e){t||(m(s.$$.fragment,e),t=!0)},o(e){h(s.$$.fragment,e),t=!1},d(e){D(s,e)}}}function fe(n){let s,t,e,a,r,o,c="Data started at:",i,_,d=V(n[3])+"",E,k;function H(l){n[9](l)}let g={id:"showAverageToggle",label:"show average mark line"};return n[2]!==void 0&&(g.checked=n[2]),t=new le({props:g}),Q.push(()=>X(t,"checked",H)),{c(){s=y("div"),Y(t.$$.fragment),a=U(),r=y("div"),o=y("span"),o.textContent=c,i=U(),_=y("span"),E=te(d),this.h()},l(l){s=w(l,"DIV",{class:!0});var f=O(s);v(t.$$.fragment,f),a=j(f),r=w(f,"DIV",{class:!0});var A=O(r);o=w(A,"SPAN",{"data-svelte-h":!0}),x(o)!=="svelte-1cta1ja"&&(o.textContent=c),i=j(A),_=w(A,"SPAN",{class:!0});var W=O(_);E=ee(W,d),W.forEach(p),A.forEach(p),f.forEach(p),this.h()},h(){C(_,"class","font-semibold"),C(r,"class","flex items-center gap-1 text-sm"),C(s,"class","flex flex-col justify-between gap-4 md:flex-row md:items-center md:gap-0")},m(l,f){I(l,s,f),N(t,s,null),b(s,a),b(s,r),b(r,o),b(r,i),b(r,_),b(_,E),k=!0},p(l,f){const A={};!e&&f&4&&(e=!0,A.checked=l[2],Z(()=>e=!1)),t.$set(A),(!k||f&8)&&d!==(d=V(l[3])+"")&&$(E,d)},i(l){k||(m(t.$$.fragment,l),k=!0)},o(l){h(t.$$.fragment,l),k=!1},d(l){l&&p(s),D(t)}}}function G(n){let s,t,e=n[4].length>n[12]&&P(K(n));return{c(){e&&e.c(),s=T()},l(a){e&&e.l(a),s=T()},m(a,r){e&&e.m(a,r),I(a,s,r),t=!0},p(a,r){a[4].length>a[12]?e?(e.p(K(a),r),r&2064&&m(e,1)):(e=P(K(a)),e.c(),m(e,1),e.m(s.parentNode,s)):e&&(q(),h(e,1,1,()=>{e=null}),z())},i(a){t||(m(e),t=!0)},o(a){h(e),t=!1},d(a){a&&p(s),e&&e.d(a)}}}function P(n){let s,t;return s=new oe({props:{params:n[11],currentItem:n[13],aggregation:n[0],unit:n[7]}}),{c(){Y(s.$$.fragment)},l(e){v(s.$$.fragment,e)},m(e,a){N(s,e,a),t=!0},p(e,a){const r={};a&2048&&(r.params=e[11]),a&2064&&(r.currentItem=e[13]),a&1&&(r.aggregation=e[0]),s.$set(r)},i(e){t||(m(s.$$.fragment,e),t=!0)},o(e){h(s.$$.fragment,e),t=!1},d(e){D(s,e)}}}function ge(n){let s,t,e=n[11]!==void 0&&G(L(n));return{c(){e&&e.c(),s=T()},l(a){e&&e.l(a),s=T()},m(a,r){e&&e.m(a,r),I(a,s,r),t=!0},p(a,r){a[11]!==void 0?e?(e.p(L(a),r),r&2048&&m(e,1)):(e=G(L(a)),e.c(),m(e,1),e.m(s.parentNode,s)):e&&(q(),h(e,1,1,()=>{e=null}),z())},i(a){t||(m(e),t=!0)},o(a){h(e),t=!1},d(a){a&&p(s),e&&e.d(a)}}}function ue(n){let s,t,e,a;return e=new se({props:{showAverageMarkline:n[2],onclick:n[6],color:ce,unit:n[7],timeseries:n[4],aggregation:n[0],$$slots:{tooltip:[ge,({params:r})=>({11:r}),({params:r})=>r?2048:0],footer:[fe],headerActions:[ie]},$$scope:{ctx:n}}}),{c(){s=y("div"),t=y("div"),Y(e.$$.fragment),this.h()},l(r){s=w(r,"DIV",{class:!0});var o=O(s);t=w(o,"DIV",{class:!0});var c=O(t);v(e.$$.fragment,c),c.forEach(p),o.forEach(p),this.h()},h(){C(t,"class","absolute top-0 right-0 bottom-0 left-0"),C(s,"class","relative grow")},m(r,o){I(r,s,o),b(s,t),N(e,t,null),a=!0},p(r,[o]){const c={};o&4&&(c.showAverageMarkline=r[2]),o&16&&(c.timeseries=r[4]),o&1&&(c.aggregation=r[0]),o&18463&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){a||(m(e.$$.fragment,r),a=!0)},o(r){h(e.$$.fragment,r),a=!1},d(r){r&&p(s),D(e)}}}function me(n,s,t){let{data:e}=s,a=u.MONTH,r=M.YEAR,o=!1,c,i=[];const _=g=>{t(0,a=u.MONTH),t(1,r=M.YEAR),t(4,i=g.months),t(3,c=i[0].startedAt)},d=(g,l)=>{if(l===M.YEAR){switch(g){case u.MONTH:t(4,i=e.months);break;case u.WEEK:t(4,i=e.weeks);break}t(3,c=i[0].startedAt),t(0,a=g),t(1,r=l);return}const f=S(R(c).startOf("month"));switch(g){case u.WEEK:t(4,i=e.weeksMap[f]);break;case u.DAY:t(4,i=e.daysMap[f]);break}t(3,c=i[0].startedAt),t(0,a=g)},E=g=>{const{startedAt:l}=g;let f=S(l);if(r===M.YEAR){switch(a){case u.MONTH:t(0,a=u.WEEK),t(4,i=e.weeksMap[f]);break;case u.WEEK:f=S(R(l).startOf("month")),t(0,a=u.DAY),t(4,i=e.daysMap[f]);break}t(3,c=i[0].startedAt),t(1,r=M.MONTH);return}switch(a){case u.WEEK:f=S(R(l).startOf("month")),t(0,a=u.DAY),t(4,i=e.daysMap[f]);break;case u.DAY:t(0,a=u.HOUR),t(4,i=e.hoursMap[f]);break}t(3,c=i[0].startedAt)},k=ae.M3;function H(g){o=g,t(2,o)}return n.$$set=g=>{"data"in g&&t(8,e=g.data)},n.$$.update=()=>{n.$$.dirty&256&&_(e)},[a,r,o,c,i,d,E,k,e,H]}class be extends B{constructor(s){super(),F(this,s,me,ue,J,{data:8})}}export{be as default};
